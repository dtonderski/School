(window.webpackJsonp=window.webpackJsonp||[]).push([["RichTextEditor"],{"./src/lib/isSimpleClick/index.ts":function(e,t,n){"use strict";t.a=(e=>{if(e&&e.target&&(e=>{let t=e;for(;t&&t!==window.document.body;){if("A"===t.nodeName)return!0;t=t.parentElement}return!1})(e.target)){if(e.ctrlKey)return!1;if(e.altKey)return!1;if(e.metaKey)return!1;if(e.shiftKey)return!1}return!0})},"./src/reddit/actions/economics/subredditPremium/actionCreators.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return c}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return m}),n.d(t,"h",function(){return u}),n.d(t,"i",function(){return p}),n.d(t,"j",function(){return h});var o=n("./src/lib/makeActionCreator/index.ts"),r=n("./src/reddit/actions/economics/subredditPremium/constants.ts");const s=Object(o.a)(r.a),a=Object(o.a)(r.b),i=Object(o.a)(r.c),d=Object(o.a)(r.d),c=Object(o.a)(r.e),l=Object(o.a)(r.f),m=Object(o.a)(r.g),u=(Object(o.a)(r.h),Object(o.a)(r.i)),p=Object(o.a)(r.j),h=Object(o.a)(r.k)},"./src/reddit/actions/economics/subredditPremium/thunkedActions.ts":function(e,t,n){"use strict";var o=n("./node_modules/lodash/forOwn.js"),r=n.n(o),s=n("./src/reddit/actions/governance/errorToast.ts"),a=n("./src/reddit/endpoints/economics/emojis.ts"),i=n("./src/reddit/endpoints/economics/specialMembership.ts"),d=n("./src/reddit/endpoints/economics/subredditPremium.ts"),c=n("./src/reddit/endpoints/governance/badges.ts"),l=n("./src/config.ts"),m=n("./src/reddit/endpoints/governance/requester.ts");var u=n("./src/reddit/models/Badge/index.ts"),p=n("./src/reddit/models/Badge/managementPage.ts"),h=n("./src/reddit/models/Product/index.ts"),b=n("./src/reddit/reducers/economics/subredditPremium/index.ts"),g=n("./src/reddit/selectors/economics.ts"),f=n("./src/reddit/actions/economics/subredditPremium/actionCreators.ts");n.d(t,"a",function(){return C}),n.d(t,"e",function(){return E}),n.d(t,"b",function(){return v}),n.d(t,"c",function(){return w}),n.d(t,"d",function(){return O});var x=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,s=void 0;try{for(var a,i=e[Symbol.iterator]();!(o=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(d){r=!0,s=d}finally{try{!o&&i.return&&i.return()}finally{if(r)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();const C=()=>async(e,t,{apiContext:n})=>{const o=t().user.account,r=!t().economics.specialMemberships.allSubscriptionsFetched;if(o&&r){const t=await Object(i.b)(n());if(t.ok){e(Object(f.a)(t.body));const o=Object.keys(t.body);if(o.length){const t=await Object(i.f)(n(),o);t.ok&&e(Object(f.h)(t.body))}}}},E=(e,t)=>async(n,o,{apiContext:r})=>{const s=o().user.account,a=o().economics.subredditPremium[e],i=!a||a.status!==b.a.Fetched||t;if(s&&i){const t=await Object(d.a)(r(),e,s.id);n(Object(f.j)(t))}},v=e=>async(t,n,{apiContext:o})=>{const r=n(),a=r.user.account,i=Object(g.d)(r,e.subredditId),d=Object.keys(i).map(e=>i[e]).filter(Boolean);if(a&&e.badge){let n;n=e.placement===u.a.First?i[p.a.Loyalty]:e.placement===u.a.Second?i[p.a.Achievement]:i[p.a.Cosmetic],t(Object(f.b)(Object.assign({},e,{currentAppliedBadges:d,userId:a.id})));const r=await Object(c.a)(o(),e.subredditId,e.badge.id);r.ok||(t(Object(f.b)(Object.assign({},e,{badge:n,currentAppliedBadges:d,userId:a.id}))),Object(s.a)(t,r.error))}},w=(e,t)=>async(n,o,{apiContext:r})=>{await n(E(e,!0));const s=o().economics.subredditPremium[e];if(s&&s.status===b.a.Fetched){const o=s.data.userOwnedBadges.find(e=>e.type===t.id);o&&(n(v({badge:o,subredditId:e})),n(Object(f.e)(p.c.MyBadges)))}},O=e=>async(t,n,{apiContext:o})=>{const i=n().user.account,d=!n().economics.emotes[e],c=!n().economics.gifs[e];if(i&&(d||c)){var u=await Promise.all([Object(a.b)(o(),e),function(e,t,n){return Object(m.a)(e,{method:"get",endpoint:`${l.a.metaUrl}/products/${t}?owners=${n}`+"&types=emotes_pack,giphy"})}(o(),e,i.id)]),p=x(u,2);const n=p[0],d=p[1];if(!d.ok)return void Object(s.a)(t,d.error);const c={emotes:[],emoteCollections:n.ok?n.body:{},giphy:[]};r()(d.body,e=>{e.type===h.a.EmotesPack?c.emotes.push(e):e.type===h.a.Giphy&&c.giphy.push(e)}),t(Object(f.f)({subredditId:e,products:c}))}}},"./src/reddit/components/CollapseIntoOverflow/index.m.less":function(e,t,n){e.exports={hidden:"_2x_bJPl7Q970NCRxOS36QB",innerWrapper:"_3oLr47tuKGv2mNpavCZ2X0",outerWrapper:"_1wi_3uF8fUynqe5reIop-G",overflowMenu:"_2aOuodBenLHlceR3j0AlIM",overflowMenuWrapper:"_3nQ7w1VIzZvzFawddOYgBC",row:"_2IirhjIkZ7hgWGtpr087xZ"}},"./src/reddit/components/CommentCreation/ExpandingFormDiv.m.less":function(e,t,n){e.exports={breakout:"_1VBLErIxAjOke05q8yLOyf"}},"./src/reddit/components/CommentCreation/ExpandingFormDiv.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./src/lib/classNames/index.ts"),a=n("./src/reddit/components/CommentCreation/ExpandingFormDiv.m.less"),i=n.n(a),d=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};t.a=(e=>{var t=e.breakOut,n=e.depth,o=e.isEditing,a=d(e,["breakOut","depth","isEditing"]);return r.a.createElement("div",Object.assign({className:Object(s.a)({[i.a.breakout]:t}),style:{left:((e,t)=>21*e+33+(t?10:0))(n,o)}},a))})},"./src/reddit/components/CommentCreation/FormFooter/index.m.less":function(e,t,n){e.exports={SubmitButton:"_22S4OsoDdOqiM-hPTeOURa",submitButton:"_22S4OsoDdOqiM-hPTeOURa",LoadingIcon:"_2qsMO_C_HwxgUgktaOeqZ2",loadingIcon:"_2qsMO_C_HwxgUgktaOeqZ2",CancelButton:"cZz52cPDbNgzrR1Oo1k27",cancelButton:"cZz52cPDbNgzrR1Oo1k27",ButtonWrapper:"_3SNMf5ZJL_5F1qxcZkD0Cp",buttonWrapper:"_3SNMf5ZJL_5F1qxcZkD0Cp",FormFooterWrapper:"_17TqawK-44tH0psnHPIhzS",formFooterWrapper:"_17TqawK-44tH0psnHPIhzS",pending:"_5p2VqxvUAZTtPIXr7XU5p"}},"./src/reddit/components/CommentCreation/FormFooter/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./src/lib/classNames/index.ts"),a=n("./src/lib/lessComponent.tsx"),i=n("./src/reddit/controls/Button/index.tsx"),d=n("./src/reddit/controls/LoadingIcon/index.tsx"),c=n("./src/reddit/i18n/components.tsx"),l=n("./src/reddit/components/CommentCreation/FormFooter/index.m.less"),m=n.n(l);const u=a.a.div("FormFooterWrapper",m.a),p=a.a.wrapped(i.f,"SubmitButton",m.a),h=a.a.wrapped(d.a,"LoadingIcon",m.a),b=a.a.wrapped(i.i,"CancelButton",m.a),g=a.a.div("ButtonWrapper",m.a),f=e=>e.preventDefault();t.a=(({pending:e,cancelButtonEnabled:t=!0,children:n,className:o,submitButtonText:a,canSubmit:i,onSubmit:d,onCancel:l})=>r.a.createElement(u,{className:Object(s.a)(o,{[m.a.pending]:e})},r.a.createElement(g,null,r.a.createElement(p,{type:"submit",disabled:!i,onClick:d,onMouseDown:f},e?r.a.createElement(h,{sizePx:10}):a),t&&r.a.createElement(b,{type:"reset",disabled:e,onClick:l,onMouseDown:f},r.a.createElement(c.c,null,"cancel"))),n))},"./src/reddit/components/CommentCreation/MarkdownCommentForm/MarkdownModeButton.m.less":function(e,t,n){e.exports={LoadingIcon:"_2DZnviMjaD88Udr-5V3j38",loadingIcon:"_2DZnviMjaD88Udr-5V3j38",Wrapper:"_3oZ5XBWSc3x7cXsvdt3fJ",wrapper:"_3oZ5XBWSc3x7cXsvdt3fJ",MarkdownModeIcon:"_1EifMLRAKpii4eqciAhY4q",markdownModeIcon:"_1EifMLRAKpii4eqciAhY4q",Button:"_1Q2Vq3gesOWZA73NbspEiQ",button:"_1Q2Vq3gesOWZA73NbspEiQ"}},"./src/reddit/components/CommentCreation/MarkdownCommentForm/index.m.less":function(e,t,n){e.exports={LoadingIcon:"_2izw1tRcQRvnfuR1E05Cy4",loadingIcon:"_2izw1tRcQRvnfuR1E05Cy4",CommentHeader:"PN-j_b1WdWATQha3fOgkV",commentHeader:"PN-j_b1WdWATQha3fOgkV",HelpButton:"MQruKnjMvMoDlmee_nF40",helpButton:"MQruKnjMvMoDlmee_nF40",SwitchModeButton:"_2UH-_HmB6X-2cCsOZVDtC5",switchModeButton:"_2UH-_HmB6X-2cCsOZVDtC5",FormHeaderText:"_1EQf9w-o91arfThHA8fn-N",formHeaderText:"_1EQf9w-o91arfThHA8fn-N",HelpIcon:"_3TI2tdRj3loY834ns393zu",helpIcon:"_3TI2tdRj3loY834ns393zu",Wrapper:"B0932G-wzdOKwoaSaKsKU",wrapper:"B0932G-wzdOKwoaSaKsKU",isTopLevelComment:"_3-O087Fe8Gpv51vkui03iG",FormWrapper:"_2LoNYeXgOQfq1adQ3jWSbi",formWrapper:"_2LoNYeXgOQfq1adQ3jWSbi",pending:"_1N53zdZlGyvjHMUoXkJa42",focused:"_2sPOgUISlhUYTMcHhUPCTP"}},"./src/reddit/components/CommentCreation/MarkdownCommentForm/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./node_modules/react-dom/index.js"),a=n("./node_modules/react-redux/es/index.js"),i=n("./node_modules/react-router-dom/es/index.js"),d=n("./node_modules/reselect/es/index.js"),c=n("./src/app/strings/index.ts"),l=n("./src/reddit/actions/comment.ts"),m=n("./src/reddit/components/AuthorLink/index.tsx"),u=n("./src/reddit/components/CommentCreation/NavigationModule/index.ts"),p=n("./src/reddit/components/CommentCreation/ToxicityWarningModal.tsx"),h=n("./src/reddit/components/ConfirmUserActionModal/index.tsx"),b=n("./src/reddit/components/MarkdownHelp/index.tsx"),g=n("./src/reddit/controls/ErrorText/index.tsx"),f=n("./src/reddit/controls/LoadingIcon/index.tsx"),x=n("./src/reddit/i18n/utils.ts"),C=n("./src/reddit/icons/svgs/Help/index.tsx"),E=n("./src/reddit/components/CommentCreation/ExpandingFormDiv.tsx"),v=n("./src/reddit/components/CommentCreation/FormFooter/index.tsx"),w=n("./src/lib/fastdom/index.ts"),O=n("./src/reddit/components/CommentCreation/ToolbarSelector.m.less"),y=n.n(O),T=n("./src/lib/lessComponent.tsx");const j=310,M=T.a.div("Container",y.a);class k extends r.a.Component{constructor(){super(...arguments),this.state={toolbarType:null},this.setContainerRef=(e=>this.container=e),this.selectToolbar=(()=>{const e=this.container&&this.container.parentElement;if(!e)return;const t=e.getBoundingClientRect().width<j?"compact":"full";t!==this.state.toolbarType&&w.a.write(()=>{this.setState({toolbarType:t})})})}componentDidMount(){w.a.read(this.selectToolbar),window.addEventListener("resize",this.selectToolbar)}componentWillUnmount(){window.removeEventListener("resize",this.selectToolbar)}render(){return r.a.createElement(M,{innerRef:this.setContainerRef},this.state.toolbarType?this.props.children(this.state.toolbarType):null)}}var S=e=>r.a.createElement("svg",{className:e.className,viewBox:"0 0 208 128"},r.a.createElement("rect",{width:"198",height:"118",x:"5",y:"5",ry:"10",stroke:"currentColor",strokeWidth:"10",fill:"none"}),r.a.createElement("path",{d:"M30 98v-68h20l20 25 20-25h20v68h-20v-39l-20 25-20-25v39zM155 98l-30-33h20v-35h20v35h20z"})),_=n("./src/reddit/components/PostCreationForm/DivButton/index.tsx"),R=n("./src/reddit/components/RichTextEditor/HoverTooltip/index.tsx"),F=n("./src/reddit/components/CommentCreation/MarkdownCommentForm/MarkdownModeButton.m.less"),B=n.n(F);const I=Object(c.e)("comment.switchToRTE"),P=T.a.wrapped(f.a,"LoadingIcon",B.a),H=T.a.div("Wrapper",B.a),N=T.a.wrapped(S,"MarkdownModeIcon",B.a),W=T.a.wrapped(_.a,"Button",B.a);var A=e=>{const t=I(e.language);return r.a.createElement(H,null,r.a.createElement(W,{"aria-label":t,setRef:e.buttonRef,className:e.className,onClick:e.onClick},e.isConverting&&r.a.createElement(P,{sizePx:12}),r.a.createElement(R.a,{text:t}),!e.isConverting&&r.a.createElement(N,null)))},D=n("./src/lib/classNames/index.ts"),L=n("./src/reddit/constants/keycodes.ts"),z=n("./src/reddit/components/CommentCreation/getCancelModalId.ts"),U=n("./src/reddit/components/CommentCreation/translations.ts"),K=n("./src/reddit/constants/componentSizes.ts"),V=n("./src/reddit/constants/componentTestIds.ts"),q=n("./src/reddit/selectors/activeModalId.ts"),G=n("./src/reddit/selectors/comments.ts"),Q=n("./src/reddit/selectors/editorContent.ts"),X=n("./src/reddit/actions/modal.ts"),J=n("./src/reddit/components/ResizableAutosizeTextarea/index.tsx"),Z=n("./src/reddit/models/PostCreationForm/index.ts"),Y=n("./src/reddit/models/PostDraft/index.ts"),$=n("./src/reddit/models/User/index.ts"),ee=n("./src/reddit/components/CommentCreation/MarkdownCommentForm/index.m.less"),te=n.n(ee);n.d(t,"a",function(){return de});const ne=T.a.button("SwitchModeButton",te.a),oe=T.a.wrapped(f.a,"LoadingIcon",te.a),re=T.a.div("CommentHeader",te.a),se=T.a.span("FormHeaderText",te.a),ae=T.a.button("HelpButton",te.a),ie=T.a.wrapped(C.a,"HelpIcon",te.a),de=e=>r.a.createElement(ae,{className:e.className,onClick:e.onClick},r.a.createElement(ie,null)),ce=8,le=16,me=T.a.div("Wrapper",te.a),ue=T.a.div("FormWrapper",te.a),pe=Object(a.b)(()=>Object(d.c)({activeModalId:q.a,userName:e=>e.user.account?Object($.f)(e.user.account):"",pending:(e,t)=>e.comments.submit.pending[t.draftKey],draft:G.i,isConverting:(e,t)=>Object(Q.a)(e,t.draftKey)}),(e,t)=>({cancelModalToggled:()=>e(Object(X.i)(Object(z.a)(t.draftKey))),helpModalToggled:()=>e(Object(X.i)(b.b))}));t.b=pe(Object(i.e)(class extends r.a.Component{constructor(e){super(e),this.textAreaRef=null,this.cancelForm=(()=>{this.props.onCancel(),this.onBlur()}),this.detectBreakout=(()=>{if(!this.wrapperEl||!this.wrapperEl.parentElement||this.props.isTopLevelComment)return;const e=this.wrapperEl.parentElement.getBoundingClientRect().width<K.d,t=this.getWrapperHeight();e===this.state.breakOut&&t===this.state.wrapperHeight||w.a.write(()=>{this.setState({breakOut:e,wrapperHeight:t})})}),this.focus=(()=>{this.textAreaRef&&this.textAreaRef.focus()}),this.onChange=(e=>{const t=e.currentTarget.value;this.props.onChange&&this.props.onChange({text:t,editorState:null}),this.setState(()=>({text:t,hasChanged:!0,showError:!1}),()=>{w.a.read(this.detectBreakout)})}),this.shouldConfirmCancel=(()=>this.userHasEnteredText()&&this.state.hasChanged&&this.props.draftType===Y.c.edit),this.onCancel=(()=>{this.shouldConfirmCancel()?this.props.cancelModalToggled():this.cancelForm()}),this.onBlur=(e=>{(!e||e&&e.relatedTarget!==this.switchModeBtn)&&(this.textAreaRef&&this.textAreaRef.blur(),this.props.onFocusChanged(!1))}),this.onFocus=(()=>{this.props.onFocus(),this.props.onFocusChanged(!0)}),this.handleKeyDown=(e=>{const t=e.ctrlKey,n=e.metaKey,o=e.keyCode;(t||n)&&o===L.a.Enter&&this.onSubmit()}),this.onSubmit=(()=>{this.props.onSubmit({commentMode:Z.h.MARKDOWN,draftType:this.props.draftType,editorState:null,text:this.getCurrentText(),validate:this.props.showWarningModal}),this.onBlur()}),this.userHasEnteredText=(()=>!!this.state.text.trim()),this.setWrapperRef=(e=>{this.wrapperEl=e,this.props.editorElementRef&&this.props.editorElementRef(e)}),this.setTextAreaRef=(e=>this.textAreaRef=e);const t=e.draftType,n=e.hasError,o=e.initialText,r=e.language;this.state={text:o||"",autofocusDisabled:!1,hasChanged:!1,showError:n,breakOut:!1,wrapperHeight:void 0,formHeight:null,cancelModalText:t===Y.c.edit?Object(c.a)(r,"comment.confirmCancellation.edit"):Object(c.a)(r,"comment.confirmCancellation.creation")}}componentDidMount(){this.props.onMount(),window.addEventListener("resize",this.detectBreakout),w.a.read(this.detectBreakout),w.a.write(()=>{this.props.draft.hasFocus&&this.textAreaRef&&this.textAreaRef.focus()}),this.props.instanceRef&&this.props.instanceRef(this)}componentWillUnmount(){this.props.onUnmount({text:this.getCurrentText()}),window.removeEventListener("resize",this.detectBreakout),this.props.instanceRef&&this.props.instanceRef(null)}componentDidUpdate(e){const t=e.pending;var n=this.props;const o=n.hasError,r=n.pending;!t||r||o?e.hasError!==this.props.hasError&&this.setState({showError:this.props.hasError}):this.setState({text:"",showError:!1})}getCurrentText(){const e=this.props.draft,t=e&&e.text;return this.state.text||t}getWrapperHeight(){if(!this.textAreaRef)return;const e=Object(s.findDOMNode)(this.textAreaRef);return e instanceof Element?e.getBoundingClientRect().height+ce+le+K.p:void 0}render(){var e=this.props;const t=e.activeModalId,n=e.autofocus,o=e.cancelModalToggled,s=e.className,a=e.disableAutofocus,i=e.depth,d=e.draft,c=e.draftKey,f=e.draftType,C=e.errorMsgs,w=e.pending,O=e.language,y=e.modalSeen,T=e.submitButtonText,j=e.isTopLevelComment,M=e.onSwitchMode,S=e.userName;var _=this.state;const R=_.cancelModalText,F=_.showError,B=_.text,I=_.breakOut,P=_.wrapperHeight,H=Object(z.a)(c),N=d.draftType===Y.c.edit;return r.a.createElement(me,{"data-test-id":V.b,className:Object(D.a)(s,{[te.a.isTopLevelComment]:j}),ref:this.setWrapperRef,style:{height:I?P:void 0}},j&&r.a.createElement(re,null,r.a.createElement(se,null,"Comment as"),r.a.createElement(m.a,{author:S,isAdmin:!1,isAdminEmeritus:!1,isAuthorDeleted:!1,isMod:!1,isOp:!1},S)),r.a.createElement(E.a,{breakOut:I,depth:i,isEditing:N},r.a.createElement(ue,{className:Object(D.a)({[te.a.pending]:w,[te.a.focused]:d.hasFocus})},r.a.createElement(J.a,{innerRef:this.setTextAreaRef,autoFocus:n&&!a,disabled:w,initialHeight:this.props.initialHeight,onBlur:this.onBlur,onChange:this.onChange,onEditorResize:this.props.onEditorResize,onFocus:this.onFocus,onKeyDown:this.handleKeyDown,placeholder:Object(x.c)("What are your thoughts?"),value:B}),r.a.createElement(v.a,{cancelButtonEnabled:f!==Y.c.replyToPost,onSubmit:this.onSubmit,onCancel:this.onCancel,pending:w,submitButtonText:T,canSubmit:this.userHasEnteredText()},r.a.createElement(k,null,e=>"compact"===e?r.a.createElement(A,{language:O,buttonRef:e=>this.switchModeBtn=e,onClick:()=>M(Z.h.RICH_TEXT,B,c),isConverting:this.props.isConverting}):r.a.createElement("div",null,r.a.createElement(ne,{innerRef:e=>this.switchModeBtn=e,onClick:()=>M(Z.h.RICH_TEXT,B,c)},"Switch to Fancy Pants Editor",this.props.isConverting&&r.a.createElement(oe,{sizePx:12})))),r.a.createElement(de,{onClick:this.props.helpModalToggled})))),F&&Object(g.b)(C,O),t===H&&r.a.createElement(h.a,{actionText:Object(U.a)(O),cancelActionText:Object(U.b)(O),modalText:R,onConfirm:()=>this.cancelForm(),toggleModal:o,trackClick:()=>{}}),t===b.b&&r.a.createElement(b.a,{language:O}),t===l.sb&&r.a.createElement(p.a,{onSubmit:this.onSubmit,modalSeen:y,withOverlay:!0}),r.a.createElement(u.a,{language:O,editKey:c,hasValue:!!B}))}}))},"./src/reddit/components/CommentCreation/NavigationModule/index.ts":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./node_modules/react-router-dom/es/index.js"),a=n("./src/app/strings/index.ts");let i=null;class d extends r.a.PureComponent{constructor(){super(...arguments),this.unblock=(e=>{d.blockers.delete(e),d.blockers.size||(i&&i(),i=null,window.removeEventListener("beforeunload",d.navigationBlocker))})}componentDidUpdate(e){!e.hasValue&&this.props.hasValue?this.block(this.props.editKey):e.hasValue&&!this.props.hasValue&&this.unblock(this.props.editKey)}componentWillUnmount(){this.unblock(this.props.editKey)}componentDidMount(){this.props.hasValue&&this.block(this.props.editKey)}block(e){d.blockers.add(e),i||(window.addEventListener("beforeunload",d.navigationBlocker),i=this.props.history.block(()=>{const e=this.props.isPostEdit?Object(a.a)(this.props.language,"posts.confirmNavigation"):Object(a.a)(this.props.language,"comment.confirmNavigation");return window.confirm(e)?void 0:"Are you sure you want to leave?"}))}render(){return null}}d.blockers=new Set,d.navigationBlocker=(e=>{const t="Are you sure you want to leave?";return e.returnValue=t,t}),t.a=Object(s.e)(d)},"./src/reddit/components/CommentCreation/RequestToCommentForm/index.m.less":function(e,t,n){e.exports={RequestBox:"_2dVm83ugs7xhdLU8UptoxO",requestBox:"_2dVm83ugs7xhdLU8UptoxO",commentIcon:"_3-cqJ5aJH2EZKxhqY43T9D",commentText:"_2o9LnZvm1HYNaUjzmMO8E5",requestButton:"_3OvdD2phTivi0gnXR8NPl-"}},"./src/reddit/components/CommentCreation/RichtextCommentForm/index.m.less":function(e,t,n){e.exports={CommentHeader:"_2kZkQ13N-kvhDEJOBd1S1I",commentHeader:"_2kZkQ13N-kvhDEJOBd1S1I",FormFooter:"RQTXfVRnnTF5ont3w58rx",formFooter:"RQTXfVRnnTF5ont3w58rx",MarkdownButtonWrapper:"_3SWQgWX2fzvWmGCv463r_-",markdownButtonWrapper:"_3SWQgWX2fzvWmGCv463r_-",SectionSpacer:"_3rYrfakWyDh7Y1L9ULn4ve",sectionSpacer:"_3rYrfakWyDh7Y1L9ULn4ve",ToolbarWrapper:"_2YcMhGs5-uIg9Fj4a9J2Xr",toolbarWrapper:"_2YcMhGs5-uIg9Fj4a9J2Xr",FormWrapper:"_1r4smTyOEZFO91uFIdWW6T",formWrapper:"_1r4smTyOEZFO91uFIdWW6T",isTopLevelComment:"aUM8DQ_Nz5wL0EJc_wte6",MarkdownButton:"_1Wn5lpE9yF7YQX-XVL6AUI",markdownButton:"_1Wn5lpE9yF7YQX-XVL6AUI",FormHeaderText:"_2ucWAzao-GLL6qRJ4USwVJ",formHeaderText:"_2ucWAzao-GLL6qRJ4USwVJ"}},"./src/reddit/components/CommentCreation/ToolbarSelector.m.less":function(e,t,n){e.exports={Container:"_1XC-wMQsKPqfaPcfWQCZdW",container:"_1XC-wMQsKPqfaPcfWQCZdW"}},"./src/reddit/components/CommentCreation/ToxicityWarningModal.tsx":function(e,t,n){"use strict";var o=n("./src/higherOrderComponents/asModal/index.tsx"),r=n("./node_modules/react/index.js"),s=n.n(r),a=n("./node_modules/react-redux/es/index.js"),i=n("./node_modules/uuid/v4.js"),d=n.n(i),c=n("./src/reddit/actions/comment.ts"),l=n("./src/reddit/actions/modal.ts"),m=n("./src/reddit/components/ModalStyledComponents/index.tsx"),u=n("./src/reddit/components/TrackingHelper/index.tsx"),p=n("./src/reddit/controls/TextButton/index.tsx"),h=n("./src/reddit/constants/tracking.ts"),b=n("./src/reddit/selectors/telemetry.ts");const g=e=>Object.assign({source:"toxicity_modal"},b.defaults(e),{screen:b.screen(e),subreddit:b.subreddit(e)}),f=e=>t=>Object.assign({action:h.d.VIEW,noun:"modal",correlationId:e},g(t)),x=e=>t=>Object.assign({action:h.d.CLICK,noun:"submit",correlationId:e},g(t)),C=e=>t=>Object.assign({action:h.d.CLICK,noun:"edit",correlationId:e},g(t)),E=e=>t=>Object.assign({action:h.d.CLICK,noun:"close",correlationId:e},g(t));var v=n("./src/reddit/i18n/components.tsx"),w=n("./src/reddit/layout/twoCol/ExpandLeft/index.tsx");const O=Object(a.b)(null,(e,t)=>({closeModal:()=>{e(Object(l.g)(c.sb))},continue:()=>{t.onSubmit()}}));t.a=Object(o.a)(O(Object(u.b)(class extends s.a.Component{constructor(e){super(e),this.state={correlationId:d()()}}componentDidMount(){this.props.modalSeen(),this.props.sendEvent(f(this.state.correlationId))}render(){return s.a.createElement(m.c,null,s.a.createElement(m.g,null,s.a.createElement(w.a,null,s.a.createElement(m.n,null,s.a.createElement(v.c,null,"Are you sure you want to post that?")),s.a.createElement(p.a,{onClick:()=>{this.props.sendEvent(E(this.state.correlationId)),this.props.closeModal()}},s.a.createElement(m.b,null)))),s.a.createElement(m.j,null,s.a.createElement(m.m,null,s.a.createElement(v.c,null,"A reminder from the mods: Please follow community rules when commenting."))),s.a.createElement(m.e,null,s.a.createElement(m.a,{onClick:()=>{this.props.sendEvent(C(this.state.correlationId)),this.props.closeModal()},"data-redditstyle":!0},s.a.createElement(v.c,null,"Go back and edit")),s.a.createElement(m.o,{onClick:()=>{this.props.sendEvent(x(this.state.correlationId)),this.props.continue()},"data-redditstyle":!0},s.a.createElement(v.c,null,"Comment"))))}})))},"./src/reddit/components/CommentCreation/getCancelModalId.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return o});const o=e=>`Comment-cancelModal__${e}`},"./src/reddit/components/CommentCreation/index.tsx":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/lodash/once.js"),r=n.n(o),s=n("./node_modules/react/index.js"),a=n.n(s),i=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/reselect/es/index.js"),c=n("./src/reddit/actions/comment.ts"),l=n("./src/reddit/helpers/trackers/commentsPage.ts"),m=n("./src/reddit/components/CommentCreation/MarkdownCommentForm/index.tsx"),u=n("./src/lib/lessComponent.tsx"),p=n("./src/reddit/components/ContributorRequestFlow/ContributorRequestButton.tsx"),h=n("./src/reddit/i18n/utils.ts"),b=n("./src/reddit/icons/fonts/Comment/index.tsx"),g=n("./src/reddit/models/SubredditRestrictions/index.ts"),f=n("./src/reddit/components/CommentCreation/RequestToCommentForm/index.m.less"),x=n.n(f);const C=u.a.div("RequestBox",x.a);var E=()=>a.a.createElement(C,null,a.a.createElement(b.a,{className:x.a.commentIcon}),a.a.createElement("div",{className:x.a.commentText},Object(h.c)("Only approved users can comment in this community.")),a.a.createElement(p.a,{className:x.a.requestButton,eventSource:g.b.Comment})),v=n("./node_modules/lodash/noop.js"),w=n.n(v),O=n("./src/lib/classNames/index.ts"),y=n("./src/lib/fastdom/index.ts"),T=n("./src/lib/memoizeByReference/index.ts"),j=n("./src/reddit/components/AuthorLink/index.tsx"),M=n("./src/reddit/components/ConfirmUserActionModal/index.tsx"),k=n("./src/reddit/actions/users.ts"),S=n("./src/reddit/icons/svgs/Close/index.tsx"),_=n("./src/reddit/controls/HelpfulTooltip/index.m.less"),R=n.n(_),F=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n},B=e=>{const t=e.className,n=e.children,o=e.text,r=F(e,["className","children","text"]);return a.a.createElement("div",Object.assign({className:Object(O.a)(R.a.helpfulTooltip,t)},r),o?a.a.createElement("div",{className:R.a.tooltip},o,a.a.createElement("div",{className:R.a.iconWrapper},a.a.createElement(S.a,{className:R.a.close}))):null,n)};var I=Object(i.b)(null,e=>({onMarkdownModeFtuUxViewed:()=>e(Object(k.t)({commentForm:{markdownModeNotification:!0}}))}))(class extends a.a.Component{componentDidUpdate(){var e=this.props;const t=e.onMarkdownModeFtuUxViewed;e.shouldShowFtuMessage&&t()}render(){var e=this.props;const t=e.onClick;return e.shouldShowFtuMessage&&a.a.createElement(B,{onClick:t,text:this.props.text})}}),P=n("./src/reddit/components/RichTextEditor/index.tsx"),H=n("./src/reddit/components/RichTextEditor/styleAndBlockTypes.ts"),N=n("./src/reddit/components/RichTextEditor/helpers/controlsState.ts"),W=n("./src/reddit/components/OverflowMenu/index.tsx"),A=n("./src/reddit/components/CollapseIntoOverflow/index.m.less"),D=n.n(A);const L=33,z=e=>e.preventDefault(),U=e=>`Comment--Overflow-Dropdown__${e}`,K=e=>e.reduce((e,t)=>(Array.isArray(t)?e+=t.length:t&&e++,e),0);class V extends a.a.Component{constructor(e){super(e),this.updateCurrentBreakpoint=(()=>{y.a.read(()=>{if(!this.container)return;var e=this.state;const t=e.indexOfCurrentBreakpoint,n=e.totalNumCollapsibleItems,o=this.container.clientWidth;let r=this.breakpoints.findIndex((e,t)=>{const r=t+1<n-1,s=this.breakpoints[t+1]+(r?L:0);return o<s});r<0&&(r=n-1),r!==t&&y.a.write(()=>{this.setState({indexOfCurrentBreakpoint:r,shouldShowOverflow:r<n-1})})})});const t=Array.isArray(e.children)?K(e.children):1;this.state={indexOfCurrentBreakpoint:t-1,shouldShowOverflow:!1,totalNumCollapsibleItems:t},this.breakpoints=[]}componentDidMount(){window.addEventListener("resize",this.updateCurrentBreakpoint)}componentWillUnmount(){window.removeEventListener("resize",this.updateCurrentBreakpoint)}registerBreakpoint(e,t){y.a.read(()=>{if(e&&e.clientWidth){const n=e.clientWidth;this.breakpoints[t]=0===t?n:this.breakpoints[t-1]+n,this.breakpoints[this.state.totalNumCollapsibleItems-1]&&this.updateCurrentBreakpoint()}})}render(){var e=this.props;const t=e.children,n=e.className,o=e.oveflowMenuDropdownId,r=e.onOverflowMenuClick,s=e.renderOverflowMenuTooltip;var i=this.state;const d=i.indexOfCurrentBreakpoint,c=i.shouldShowOverflow,l=a.a.Children.toArray(t).filter(Boolean);return a.a.createElement("div",{className:Object(O.a)(D.a.outerWrapper,n),ref:e=>this.container=e},a.a.createElement("div",{className:D.a.innerWrapper},l.map((e,t)=>a.a.createElement("span",{className:t>d?D.a.hidden:void 0,key:t,ref:e=>this.registerBreakpoint(e,t)},e)),c&&a.a.createElement("div",{className:D.a.overflowMenuWrapper,key:"overflowMenuWrapper"},s&&s(),a.a.createElement(W.b,{className:D.a.overflowMenu,dropdownId:U(o),isFixed:!1,handleMouseDown:z,onClick:r},a.a.createElement("div",{className:D.a.row},l.map((e,t)=>a.a.createElement("span",{className:t<=d?D.a.hidden:void 0,key:t},e)))))))}}var q=n("./src/reddit/components/RichTextEditor/Toolbar/index.tsx"),G=n("./src/reddit/icons/svgs/Smile/index.tsx"),Q=n("./src/reddit/selectors/economics.ts"),X=n("./src/reddit/components/RichTextEditor/Toolbar/FormatterButton/index.tsx"),J=n("./src/reddit/components/RichTextEditor/Toolbar/EmoteButton/index.m.less"),Z=n.n(J);const Y=Object(d.c)({emotes:(e,{subredditId:t})=>{const n=Object(Q.c)(e,t);if(n){const e=n.reduce((e,t)=>Object.assign({},e,t.emotes),{});return Object.keys(e).slice(0,3).map(t=>e[t])}return[]}});var $=Object(i.b)(Y)(function(e){const t=e.controlsState,n=e.emotes,o=e.onEmoteButtonClick;return a.a.createElement(X.a,{Icon:()=>a.a.createElement(G.a,{className:Z.a.smile}),tooltip:Object(h.c)("Add Emote"),enabled:t.emote.isEnabled,onClick:o},a.a.createElement("div",{className:Object(O.a)(Z.a.emotes,{[Z.a.emoteMask]:n.length>1})},n.map(e=>a.a.createElement("img",{className:Z.a.emote,key:e.id,src:e.emoji.path}))))}),ee=n("./src/reddit/components/RichTextEditor/Toolbar/formatterConfigs.tsx"),te=n("./src/reddit/components/RichTextEditor/Toolbar/GifButton/index.m.less"),ne=n.n(te);const oe=Object(ee.f)(e=>a.a.createElement("svg",{className:e.className,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.78413 14.5651C4.76663 14.6972 6.07763 14.7 8 14.7C9.92237 14.7 11.2334 14.6972 12.2159 14.5651C13.161 14.4381 13.6052 14.2132 13.9092 13.9092C14.2132 13.6052 14.4381 13.161 14.5651 12.2159C14.6972 11.2334 14.7 9.92237 14.7 8C14.7 6.07763 14.6972 4.76663 14.5651 3.78413C14.4381 2.83903 14.2132 2.3948 13.9092 2.09081C13.6052 1.78682 13.161 1.56192 12.2159 1.43485C11.2334 1.30276 9.92237 1.3 8 1.3C6.07763 1.3 4.76663 1.30276 3.78413 1.43485C2.83903 1.56192 2.3948 1.78682 2.09081 2.09081C1.78682 2.3948 1.56192 2.83903 1.43485 3.78413C1.30276 4.76663 1.3 6.07763 1.3 8C1.3 9.92237 1.30276 11.2334 1.43485 12.2159C1.56192 13.161 1.78682 13.6052 2.09081 13.9092C2.3948 14.2132 2.83903 14.4381 3.78413 14.5651ZM1.17157 1.17157C0 2.34315 0 4.22876 0 8C0 11.7712 0 13.6569 1.17157 14.8284C2.34315 16 4.22876 16 8 16C11.7712 16 13.6569 16 14.8284 14.8284C16 13.6569 16 11.7712 16 8C16 4.22876 16 2.34315 14.8284 1.17157C13.6569 0 11.7712 0 8 0C4.22876 0 2.34315 0 1.17157 1.17157Z"}),a.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.76197 6.36433L6.03894 7.11365C5.7183 6.79814 5.32849 6.7127 5.03299 6.7127C4.31625 6.7127 3.851 7.15966 3.851 8.06015C3.851 8.65172 4.1465 9.38132 5.03299 9.38132C5.26562 9.38132 5.63028 9.33531 5.88177 9.1447V8.55313H4.76893V7.53432H6.91915V9.57851C6.64252 10.1635 5.87548 10.479 5.02671 10.479C3.28515 10.479 2.625 9.26301 2.625 8.06015C2.625 6.8573 3.37946 5.62158 5.03299 5.62158C5.64285 5.62158 6.18355 5.75304 6.76197 6.36433ZM9.02735 10.3541H7.78877V5.75304H9.02735V10.3541ZM11.3179 10.3541H10.0856V5.75304H13.4618V6.84415H11.3179V7.70521H13.3298V8.77004H11.3179V10.3541Z"})));var re=function(e){const t=e.controlsState,n=e.onGifButtonClick,o=e.userCanUseGifs,r=t.giphy.isEnabled;return a.a.createElement(X.a,{Icon:oe,className:r&&o?ne.a.rainbow:"",tooltip:Object(h.c)("Add GIF"),disabledTooltip:Object(h.c)("Limit 1 GIF / comment"),enabled:r,onClick:n})},se=n("./src/reddit/components/RichTextEditor/Toolbar/CommentToolbar.m.less"),ae=n.n(se);const ie=u.a.div("SectionSpacer",ae.a);var de=e=>{const t=e.className,n=e.destSubreddit,o=e.editorKey,r=e.editorState,s=e.language,i=e.onChange,d=e.onEmoteButtonClick,c=e.onGifButtonClick,l=e.onOverflowMenuClick,m=e.readOnly,u=e.trackOnClick,p=e.onLinkButtonClick,h=e.userCanUseGifs,b=Object(N.a)(r);m&&Object(N.b)(b);const g=n&&d,f=c&&a.a.createElement(re,{controlsState:b,onGifButtonClick:c,userCanUseGifs:h});return a.a.createElement(V,{className:t,oveflowMenuDropdownId:o,onOverflowMenuClick:l},c&&h&&f,g&&a.a.createElement($,{controlsState:b,subredditId:n&&n.id,onEmoteButtonClick:d}),c&&!h&&f,(g||c)&&a.a.createElement(ie,null),Object(q.g)(q.f,b,r,i,u,s),a.a.createElement(q.a,{language:s,controlsState:b,trackOnClick:u,onLinkButtonClick:p}),Object(q.g)(q.h,b,r,i,u,s),a.a.createElement(ie,null),Object(q.g)(q.e,b,r,i,u,s),a.a.createElement(ie,null),a.a.createElement(q.d,{language:s,controlsState:b,editorState:r,trackOnClick:u,onChange:i}))},ce=n("./src/reddit/components/RichTextEditor/Toolbar/MarkdownButton/index.tsx"),le=n("./src/reddit/constants/componentSizes.ts"),me=n("./src/reddit/constants/componentTestIds.ts"),ue=n("./src/reddit/controls/ErrorText/index.tsx"),pe=n("./src/reddit/i18n/components.tsx"),he=n("./src/reddit/components/CommentCreation/ExpandingFormDiv.tsx"),be=n("./src/reddit/components/CommentCreation/FormFooter/index.tsx"),ge=n("./src/reddit/components/CommentCreation/getCancelModalId.ts"),fe=n("./src/reddit/components/CommentCreation/translations.ts"),xe=n("./src/app/strings/index.ts"),Ce=n("./src/reddit/models/PostCreationForm/index.ts"),Ee=n("./src/reddit/models/PostDraft/index.ts"),ve=n("./src/reddit/actions/modal.ts"),we=n("./src/reddit/components/CommentCreation/NavigationModule/index.ts"),Oe=n("./src/reddit/components/CommentCreation/ToxicityWarningModal.tsx"),ye=n("./src/reddit/components/RichTextEditor/RTEState/index.tsx"),Te=n("./src/reddit/contexts/PageLayer/index.tsx"),je=n("./src/reddit/contexts/PageLayer/selectors.ts"),Me=n("./src/reddit/helpers/richTextEditor/index.ts"),ke=n("./src/reddit/models/Subreddit/index.ts"),Se=n("./src/reddit/selectors/activeModalId.ts"),_e=n("./src/reddit/selectors/comments.ts"),Re=n("./src/reddit/selectors/user.ts"),Fe=n("./src/reddit/components/CommentCreation/RichtextCommentForm/index.m.less"),Be=n.n(Fe);const Ie=Object(xe.e)("comment.dontDigFancyPants"),Pe=16,He=u.a.div("FormWrapper",Be.a),Ne=u.a.div("CommentHeader",Be.a),We=u.a.wrapped(be.a,"FormFooter",Be.a),Ae=u.a.div("MarkdownButtonWrapper",Be.a),De=u.a.wrapped(ce.a,"MarkdownButton",Be.a),Le=u.a.wrapped(ie,"SectionSpacer",Be.a),ze=u.a.div("ToolbarWrapper",Be.a),Ue=u.a.span("FormHeaderText",Be.a),Ke=({cancelButtonEnabled:e,draftKey:t,onSubmit:n,onCancel:o,pending:r,submitButtonText:s})=>i=>{const d=i.language,c=i.editorState,l=i.onFtuTooltipClick,m=i.onMarkdownButtonClick,u=i.shouldShowFtuMessage,p=c.getCurrentContent(),h=!!p.getPlainText().trim()||p.getBlockMap().some(e=>!!e&&Object(H.t)(e.getType()));return a.a.createElement(We,{cancelButtonEnabled:e,onSubmit:n,onCancel:o,pending:r,submitButtonText:s,canSubmit:h},a.a.createElement(ze,null,a.a.createElement(de,Object.assign({},i)),a.a.createElement(Le,null),a.a.createElement(Ae,null,a.a.createElement(I,{onClick:l,shouldShowFtuMessage:!!u,text:Ie(d)}),a.a.createElement(De,{draftKey:t,language:d,onClick:m,shouldHideTooltip:u}))))},Ve=Object(i.b)(()=>Object(d.c)({activeModalId:Se.a,destSubreddit:(e,t)=>{const n=Object(je.o)(e,t);return n?{name:n.name,isProfile:n.type===ke.b.User,id:n.id}:void 0},draft:_e.i,hasViewedMarkdownModeFtuUx:Re.e,userCanUseGifs:(e,t)=>{const n=Object(je.o)(e,t);return Object(Q.p)(e,n?n.id:void 0,t.parentCommentId)}}),(e,t)=>({cancelModalToggled:()=>e(Object(ve.i)(Object(ge.a)(t.draftKey)))}));var qe=Object(Te.v)()(Ve(class extends a.a.Component{constructor(e){super(e),this.getToolbarRenderer=Object(T.a)((e,t,n,o)=>Ke({cancelButtonEnabled:e,draftKey:t,onSubmit:this.onSubmit,onCancel:this.onCancel,pending:n,submitButtonText:o})),this.focus=(()=>{this.editor&&this.editor.focus()}),this.setEditorWrapperRef=(e=>{this.editorWrapperElement=e,this.props.editorElementRef&&this.props.editorElementRef(e)}),this.setRTEComponentRef=(e=>this.editor=e),this.setRTEDomElementRef=(e=>{this.editorDomElement=e}),this.detectBreakout=(()=>{if(!this.editorWrapperElement||!this.editorWrapperElement.parentElement||this.props.isTopLevelComment)return;const e=this.editorWrapperElement.parentElement.getBoundingClientRect().width<le.d,t=this.getWrapperHeight();e===this.state.breakOut&&t===this.state.formHeight||y.a.write(()=>{this.setState({breakOut:e,formHeight:t})})}),this.hasContent=(()=>{const e=this.state.rteState;return ye.a.hasContent(e)}),this.handleBlur=(()=>this.props.onFocusChanged(!1)),this.handleFocus=(()=>{this.props.onFocus(),this.props.onFocusChanged(!0)}),this.handleChange=((e,t)=>{const n=this.props.onChange;n&&n({rteState:e}),t&&this.setState({hasChanged:!0}),this.setState(()=>({showError:!1,rteState:e}),()=>{y.a.read(this.detectBreakout)})}),this.cancelForm=(()=>{this.editor&&this.props.draftType===Ee.c.replyToPost&&this.setState({rteState:ye.a.createInitial()}),this.props.onCancel()}),this.shouldConfirmCancel=(()=>this.hasContent()&&this.state.hasChanged&&this.props.draftType===Ee.c.edit),this.onCancel=(()=>{this.shouldConfirmCancel()?this.props.cancelModalToggled():this.cancelForm()}),this.onSubmit=(()=>{this.props.onSubmit({rteState:this.state.rteState,commentMode:Ce.h.RICH_TEXT,draftType:this.props.draftType,validate:this.props.showWarningModal})}),this.onSwitchEditorMode=((e,t)=>{this.props.onSwitchMode(e,t,this.props.draftKey)});const t=e.draft,n=e.draftType,o=e.hasError,r=e.language,s=e.mediaMetadata,a=e.rtJson;this.state={breakOut:!1,cancelModalText:n===Ee.c.edit?Object(xe.a)(r,"comment.confirmCancellation.edit"):Object(xe.a)(r,"comment.confirmCancellation.creation"),rteState:!a&&t&&t.rteState?t.rteState:ye.a.createInitial(a,s),formHeight:void 0,hasChanged:!1,showError:o}}componentWillReceiveProps(e){this.props.draft&&this.props.draft.rteState&&e.draft&&null===e.draft.rteState&&this.setState({rteState:ye.a.createInitial()}),e.hasError!==this.props.hasError&&this.setState({showError:e.hasError})}componentWillUnmount(){this.props.onUnmount({rteState:this.state.rteState}),window.removeEventListener("resize",this.detectBreakout),this.props.instanceRef&&this.props.instanceRef(null)}componentDidMount(){this.props.draft.hasFocus&&this.editor&&(window.addEventListener("resize",this.detectBreakout),y.a.read(this.detectBreakout),y.a.write(()=>{this.props.draft.hasFocus&&this.editor&&this.editor.focus()})),this.props.instanceRef&&this.props.instanceRef(this)}getWrapperHeight(){if(this.editorDomElement)return this.editorDomElement.getBoundingClientRect().height+Pe}render(){var e=this.props;const t=e.activeModalId,n=e.cancelModalToggled,o=e.className,r=e.depth,s=e.destSubreddit,i=e.draft,d=e.draftKey,l=e.draftType,m=e.errorMsgs,u=e.hasViewedMarkdownModeFtuUx,p=e.language,h=e.modalSeen,b=e.pending,g=e.submitButtonText,f=e.isTopLevelComment,x=e.userCanUseGifs,C=e.userName;var E=this.state;const v=E.cancelModalText,y=E.breakOut,T=E.formHeight,k=E.rteState,S=Object(ge.a)(d),_=i.draftType===Ee.c.edit,R=l!==Ee.c.replyToPost;return a.a.createElement(He,{className:Object(O.a)(o,{[Be.a.isTopLevelComment]:f}),ref:this.setEditorWrapperRef,style:{height:y?T:void 0}},f&&a.a.createElement(Ne,null,a.a.createElement(Ue,null,a.a.createElement(pe.c,null,"Comment as")),a.a.createElement(j.a,{author:C,isAdmin:!1,isAdminEmeritus:!1,isAuthorDeleted:!1,isMod:!1,isOp:!1},C)),a.a.createElement(he.a,{breakOut:y,depth:r,isEditing:_},a.a.createElement(P.a,{userCanUseGifs:x,dataTestId:me.c,destSubreddit:s,editorType:Me.a.Comment,enableFtuMessage:!u,initialHeight:this.props.initialHeight,rteState:k,rteRef:this.setRTEComponentRef,domRef:this.setRTEDomElementRef,language:p,onBlur:this.handleBlur,onEditorResize:this.props.onEditorResize,onFocus:this.handleFocus,onChange:this.handleChange,onSubmit:this.onSubmit,onSwitchEditorMode:this.onSwitchEditorMode,placeholderText:"What are your thoughts?",readOnly:b,trackToolbarClick:w.a,toolbarPosition:"bottom",renderToolbar:this.getToolbarRenderer(R,d,b,g)})),this.state.showError?Object(ue.b)(m,p):null,t===S&&a.a.createElement(M.a,{actionText:Object(fe.a)(p),cancelActionText:Object(fe.b)(p),modalText:v,onConfirm:this.cancelForm,toggleModal:n,trackClick:w.a}),t===c.sb&&a.a.createElement(Oe.a,{onSubmit:this.onSubmit,modalSeen:h,withOverlay:!0}),a.a.createElement(we.a,{language:p,editKey:d,hasValue:ye.a.hasContent(k)}))}})),Ge=n("./src/reddit/components/RequestPendingBanner/index.tsx"),Qe=n("./src/reddit/models/User/index.ts"),Xe=n("./src/reddit/selectors/subreddit.ts");const Je=Object(d.c)({activeModalId:Se.a,contributorRequestPending:e=>Object(Xe.g)(e,g.e.Comment),language:Re.R,userName:e=>e.user.account?Object(Qe.f)(e.user.account):"",pending:(e,t)=>e.comments.submit.pending[t.draftKey],hasError:_e.v,errorMsgs:_e.H,draft:_e.i,disableAutofocus:_e.f,showContributorRequestFlow:e=>Object(Xe.t)(e,g.e.Comment)}),Ze=Object(i.b)(Je,(e,t)=>({onMount:()=>e(c.J(t.draftKey)),onCancel:()=>{t.draftType===Ee.c.edit?e(c.V({commentId:t.parentCommentId,commentsPageKey:t.commentsPageKey})):e(c.P({parentCommentId:t.parentCommentId,commentsPageKey:t.commentsPageKey}))},onUnmount:n=>e(c.hb(t.draftKey,n)),onFocus:r()(()=>e((e,n)=>Object(l.e)(n(),t.draftType))),onFocusChanged:n=>e(c.X({hasFocus:n,draftKey:t.draftKey})),onSwitchMode:(t,n,o)=>e(c.Q(t,n,o)),dispatchSubmit:(n,o)=>{e(t.submitAction(n,o))}}),(e,t,n)=>Object.assign({},e,t,n,{onSubmit:n=>{t.dispatchSubmit(n,e.draft.commentMode)}}));t.default=Ze(class extends a.a.Component{constructor(e){super(e),this.getInstanceRef=(e=>this.formInstanceRef=e),this.onCancel=(()=>{this.props.onCancel()}),this.onSwitchMode=(async(e,t,n)=>{await this.props.onSwitchMode(e,t,n),this.formInstanceRef&&this.formInstanceRef.focus()}),this.onEditorResize=(e=>{this.setState({editorHeight:e})}),this.modalSeen=(()=>{this.setState({showWarningModal:!1})}),this.state={showWarningModal:!0}}componentDidUpdate(e){const t=e.pending;var n=this.props;const o=n.hasError,r=n.pending;t&&!r&&!o&&this.setState({showWarningModal:!0})}render(){const e=this.props,t=e&&e.draft&&e.draft.rtJson||e.rtJson||void 0,n={autofocus:e.autofocus||!1,className:e.className,depth:e.depth,disableAutofocus:e.disableAutofocus,draftKey:e.draftKey,draftType:e.draftType,editorElementRef:e.editorElementRef,errorMsgs:e.errorMsgs,initialHeight:this.state.editorHeight,instanceRef:this.getInstanceRef,hasError:e.hasError,language:e.language,modalSeen:this.modalSeen,onCancel:e.onCancel,onEditorResize:this.onEditorResize,onFocus:e.onFocus,onFocusChanged:e.onFocusChanged,onMount:e.onMount,onSubmit:e.onSubmit,onUnmount:e.onUnmount,parentCommentId:e.parentCommentId,pending:e.pending,rtJson:t,mediaMetadata:e.mediaMetadata,isTopLevelComment:e.isTopLevelComment,submitButtonText:e.submitButtonText,userName:e.userName,initialText:e.draft?e.draft.text:e.initialText||"",onSwitchMode:this.onSwitchMode,showWarningModal:this.state.showWarningModal};return e.contributorRequestPending?a.a.createElement(Ge.a,null):e.showContributorRequestFlow?a.a.createElement(E,null):e.draft.commentMode===Ce.h.RICH_TEXT?a.a.createElement(qe,Object.assign({},n)):a.a.createElement(m.b,Object.assign({},n))}})},"./src/reddit/components/CommentCreation/translations.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return s});var o=n("./src/app/strings/index.ts");const r=Object(o.e)("comment.keep"),s=Object(o.e)("postCreation.discard.button");Object(o.e)("comment.confirmCancellation.creation")},"./src/reddit/components/InfoBanners/BannerBase/index.m.less":function(e,t,n){e.exports={IconWrapper:"_2p07tPrx9WpxDTQJ5cmVNe",iconWrapper:"_2p07tPrx9WpxDTQJ5cmVNe",TextWrapper:"_2jpm-rNr0Hniw6BX3NWMVe",textWrapper:"_2jpm-rNr0Hniw6BX3NWMVe",leftSideRectangle:"_3TLlMYjrPH9Kl9522LpSxb",wrapper:"_1DUKbp8va6vxOv9zemBDBi",subtitle:"_2J85dtk0HKQBLk8HTSWduv",title:"Nt8TnDvJ2BsL8KWcFQKy5"}},"./src/reddit/components/InfoBanners/BannerBase/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./src/lib/classNames/index.ts"),a=n("./src/reddit/components/InfoBanners/BannerBase/index.m.less"),i=n.n(a),d=n("./src/lib/lessComponent.tsx");const c=d.a.div("IconWrapper",i.a),l=d.a.div("TextWrapper",i.a);t.a=(e=>{const t=e.className,n=e.color,o=e.icon,a=e.subtitle,d=e.title;return r.a.createElement("div",{className:Object(s.a)(t,i.a.wrapper),style:n&&{borderColor:n}||{}},r.a.createElement("div",{className:i.a.leftSideRectangle,style:n&&{backgroundColor:n}||{}}),o?r.a.createElement(c,null,o):r.a.createElement(c,null),r.a.createElement(l,null,r.a.createElement("div",{className:i.a.title},d),a&&r.a.createElement("div",{className:i.a.subtitle},a)))})},"./src/reddit/components/MarkdownHelp/index.m.less":function(e,t,n){e.exports={Section:"_1gF-JM2Md5QrEmUiEkRvLZ",section:"_1gF-JM2Md5QrEmUiEkRvLZ",Container:"C8uCM4XqGMA6xiIu7zfJl",container:"C8uCM4XqGMA6xiIu7zfJl",helpTable:"_3E7k-M4lVIYGW6Z7QoiPc9",Table:"_1t5z5ubOp-UUzTGLJr43d0",table:"_1t5z5ubOp-UUzTGLJr43d0",P:"_3MhMubukVABghyvZNN2X65",p:"_3MhMubukVABghyvZNN2X65"}},"./src/reddit/components/MarkdownHelp/index.tsx":function(e,t,n){"use strict";n.d(t,"b",function(){return C});var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./node_modules/react-redux/es/index.js"),a=n("./src/reddit/components/FlairPickerTitle/index.tsx"),i=n("./src/reddit/components/FlairPickerWrapper/index.tsx"),d=n("./src/reddit/components/RichTextJson/elements.tsx"),c=n("./src/reddit/components/RichTextJson/SpoilerText.tsx"),l=n("./src/reddit/components/TrackingHelper/index.tsx"),m=n("./src/higherOrderComponents/asModal/index.tsx"),u=n("./src/reddit/actions/modal.ts"),p=n("./src/reddit/controls/Button/index.tsx"),h=n("./src/reddit/layout/row/Inline/index.tsx"),b=n("./src/reddit/layout/row/RightAlign/index.tsx"),g=n("./src/reddit/components/MarkdownHelp/index.m.less"),f=n.n(g),x=n("./src/lib/lessComponent.tsx");const C="Markdown_Help__Modal",E=x.a.wrapped(h.a,"Section",f.a),v=x.a.div("Container",f.a),w=x.a.table("Table",f.a),O=x.a.p("P",f.a);const y=Object(s.b)(null,(e,t)=>({closeModal:()=>e(Object(u.i)(C))}))(class extends r.a.Component{render(){return r.a.createElement(i.a,null,r.a.createElement(a.a,{onClosePressed:this.props.closeModal,title:"Markdown Help"}),r.a.createElement(v,null,r.a.createElement(w,{className:f.a.helpTable},r.a.createElement("tr",null,r.a.createElement(d.s,null,r.a.createElement(d.j,null,"Type this:")),r.a.createElement(d.s,null,r.a.createElement(d.j,null,"to get this:"))),r.a.createElement("tr",null,r.a.createElement(d.p,null,r.a.createElement(d.j,null,"*italics*")),r.a.createElement(d.p,null,r.a.createElement(d.f,null,"italics"))),r.a.createElement("tr",null,r.a.createElement(d.p,null,r.a.createElement(d.j,null,"**bold**")),r.a.createElement(d.p,null,r.a.createElement(d.b,null,"bold"))),r.a.createElement("tr",null,r.a.createElement(d.p,null,r.a.createElement(d.j,null,"[reddit!](https://reddit.com)")),r.a.createElement(d.p,null,r.a.createElement(d.a,{href:"https://www.reddit.com"},"reddit!"))),r.a.createElement("tr",null,r.a.createElement(d.p,null,r.a.createElement(d.j,null,"* item 1"),r.a.createElement(d.j,null,"* item 2"),r.a.createElement(d.j,null,"* item 3")),r.a.createElement(d.p,null,r.a.createElement(d.v,null,r.a.createElement(d.g,null,"item 1"),r.a.createElement(d.g,null,"item 2"),r.a.createElement(d.g,null,"item 3")))),r.a.createElement("tr",null,r.a.createElement(d.p,null,r.a.createElement(d.j,null,"> quoted text")),r.a.createElement(d.p,null,r.a.createElement(d.c,null,"quoted text"))),r.a.createElement("tr",null,r.a.createElement(d.p,null,r.a.createElement(d.j,null,"~~strikethrough~~")),r.a.createElement(d.p,null,r.a.createElement(d.d,null,"strikethrough"))),r.a.createElement("tr",null,r.a.createElement(d.p,null,r.a.createElement(d.j,null,"super^script")),r.a.createElement(d.p,null,"super",r.a.createElement(d.m,null,"script"))),r.a.createElement("tr",null,r.a.createElement(d.p,null,r.a.createElement(d.j,null,">!spoilers!<")),r.a.createElement(d.p,null,r.a.createElement(c.a,null,"spoilers")))),r.a.createElement(O,null,"Check the",r.a.createElement(d.a,{href:"https://www.reddit.com/wiki/commenting"}," commenting wiki page "),"for more help")),r.a.createElement(E,null,r.a.createElement(b.a,null,r.a.createElement(p.f,{onClick:this.props.closeModal,"data-redditstyle":!0},"Close"))))}});t.a=Object(m.a)(Object(l.b)(y))},"./src/reddit/components/PostCreationForm/MarkdownEditor/index.m.less":function(e,t,n){e.exports={LoadingIcon:"dyBWJSV5slC_6_q-avEAz",loadingIcon:"dyBWJSV5slC_6_q-avEAz",ModeDescription:"_2wjlEqW6Mz7pFfwBHVpPEA",modeDescription:"_2wjlEqW6Mz7pFfwBHVpPEA",ModeWrapper:"_2IWlVWhYLpVswet-ElQ9xx",modeWrapper:"_2IWlVWhYLpVswet-ElQ9xx",SwitchModeButton:"_2POD_tWc9UVvI3zBwPH9Yu",switchModeButton:"_2POD_tWc9UVvI3zBwPH9Yu",MarkdownHelpButton:"oqXBQCZarmL4V15c4Izxm",markdownHelpButton:"oqXBQCZarmL4V15c4Izxm",Toolbar:"_1HVLi6b9dq2O2gkgGAO1Fa",toolbar:"_1HVLi6b9dq2O2gkgGAO1Fa"}},"./src/reddit/components/PostCreationForm/MarkdownEditor/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/reselect/es/index.js"),i=n("./src/reddit/actions/postCreation/general.ts"),d=n("./src/reddit/components/CommentCreation/MarkdownCommentForm/index.tsx"),c=n("./src/reddit/components/FocusableContent/index.tsx"),l=n("./src/reddit/components/MarkdownHelp/index.tsx"),m=n("./src/reddit/components/PostCreationForm/Prompt/index.tsx"),u=n("./src/reddit/components/ResizableAutosizeTextarea/index.tsx"),p=n("./src/reddit/constants/keycodes.ts"),h=n("./src/reddit/controls/LoadingIcon/index.tsx"),b=n("./src/reddit/models/PostCreationForm/index.ts"),g=n("./src/reddit/selectors/activeModalId.ts"),f=n("./src/reddit/selectors/editorContent.ts"),x=n("./src/reddit/components/PostCreationForm/MarkdownEditor/index.m.less"),C=n.n(x),E=n("./src/lib/lessComponent.tsx");const v=E.a.wrapped(h.a,"LoadingIcon",C.a),w=E.a.span("ModeDescription",C.a),O=E.a.div("ModeWrapper",C.a),y=E.a.button("SwitchModeButton",C.a),T=E.a.wrapped(d.a,"MarkdownHelpButton",C.a),j=E.a.div("Toolbar",C.a),M=Object(a.c)({activeModalId:g.a,isConverting:e=>Object(f.a)(e)}),k=Object(s.b)(M,(e,t)=>({onChange:n=>{e(Object(i.c)(n)),t.onChange&&t.onChange(n)},helpModalToggled:()=>e(Object(i.z)(l.b)),switchToRTEModalToggled:()=>e(Object(i.z)(m.c))}));t.a=k(class extends r.a.Component{constructor(e){super(e),this.textAreaRef=null,this.onChange=(e=>{const t=e.currentTarget.value;this.props.onChange(t)}),this.onBlur=(()=>{this.setState({isFocused:!1}),this.props.onBlur&&this.props.onBlur()}),this.onFocus=(()=>{const e=this.props.onFocus;e&&e(),this.setState({isFocused:!0})}),this.handleKeyDown=(e=>{const t=e.ctrlKey,n=e.metaKey,o=e.keyCode;(t||n)&&o===p.a.Enter&&this.props.onSubmit()}),this.handleSwitchModeClick=(()=>{this.props.value?this.props.switchToRTEModalToggled():this.props.onSwitchEditorMode(b.h.RICH_TEXT,this.props.value)}),this.handleSwitchToRTEConfirm=(()=>{this.props.switchToRTEModalToggled(),this.props.onSwitchEditorMode(b.h.RICH_TEXT,this.props.value)}),this.setTextAreaRef=(e=>this.textAreaRef=e),this.state={isFocused:!1}}componentDidMount(){const e=this.props.instanceRef;e&&e(this)}componentWillUnmount(){const e=this.props.instanceRef;e&&e(null)}focus(){this.textAreaRef&&this.textAreaRef.focus()}render(){var e=this.props;const t=e.className,n=e.isConverting,o=e.placeholderText,s=e.focusableContentMarkdownClassName,a=e.value,i=this.state.isFocused;return r.a.createElement("div",{className:t},r.a.createElement(c.a,{className:s,isFocused:i},r.a.createElement(j,null,r.a.createElement(O,null,r.a.createElement(w,null,"Markdown"),r.a.createElement(T,{onClick:this.props.helpModalToggled})),r.a.createElement(y,{onClick:this.handleSwitchModeClick},n&&r.a.createElement(v,{sizePx:12}),"Switch to Fancy Pants Editor")),r.a.createElement(u.a,{disabled:!!this.props.disabled,initialHeight:this.props.initialHeight,innerRef:this.setTextAreaRef,onBlur:this.onBlur,onChange:this.onChange,onEditorResize:this.props.onEditorResize,onFocus:this.onFocus,onKeyDown:this.handleKeyDown,placeholder:o,value:a})),this.props.activeModalId===l.b&&r.a.createElement(l.a,{language:this.props.language}),this.props.activeModalId===m.c&&r.a.createElement(m.d,{modalId:m.c,onCancel:this.props.switchToRTEModalToggled,onConfirm:this.handleSwitchToRTEConfirm}))}})},"./src/reddit/components/PostCreationForm/Prompt/PromptModal.m.less":function(e,t,n){e.exports={PrimaryButton:"_35XIX8S5eAkigMxHxx98TS",primaryButton:"_35XIX8S5eAkigMxHxx98TS",ModalText:"_1ShPAP1uGnX3ZkiyNiigAA",modalText:"_1ShPAP1uGnX3ZkiyNiigAA"}},"./src/reddit/components/PostCreationForm/Prompt/PromptModal.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./src/higherOrderComponents/asModal/index.tsx"),a=n("./src/reddit/components/ModalStyledComponents/index.tsx"),i=n("./src/reddit/constants/keycodes.ts"),d=n("./src/reddit/controls/Button/index.tsx"),c=n("./src/reddit/controls/TextButton/index.tsx"),l=n("./src/reddit/layout/twoCol/ExpandLeft/index.tsx"),m=n("./src/reddit/components/PostCreationForm/Prompt/PromptModal.m.less"),u=n.n(m),p=n("./src/lib/lessComponent.tsx");const h=p.a.wrapped(d.f,"PrimaryButton",u.a),b=p.a.wrapped(a.m,"ModalText",u.a);t.a=Object(s.a)(class extends r.a.PureComponent{constructor(){super(...arguments),this.handleEscapeKey=(e=>{e.keyCode===i.a.Escape&&this.props.onClose()})}componentDidMount(){document.addEventListener("keydown",this.handleEscapeKey)}componentWillUnmount(){document.removeEventListener("keydown",this.handleEscapeKey)}render(){return r.a.createElement(a.c,null,r.a.createElement(a.g,null,r.a.createElement(l.a,null,r.a.createElement(a.n,null,this.props.titleText),r.a.createElement(c.a,{onClick:this.props.onClose},r.a.createElement(a.b,null)))),r.a.createElement(a.j,null,r.a.createElement(b,null,this.props.bodyText)),r.a.createElement(a.e,null,r.a.createElement(a.a,{onClick:this.props.onSecondaryAction},this.props.secondaryButtonText),r.a.createElement(h,{onClick:this.props.onPrimaryAction},this.props.primaryButtonText)))}})},"./src/reddit/components/PostCreationForm/Prompt/index.tsx":function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return m}),n.d(t,"c",function(){return u});var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/reselect/es/index.js"),i=n("./src/app/strings/index.ts"),d=n("./src/reddit/selectors/user.ts"),c=n("./src/reddit/components/PostCreationForm/Prompt/PromptModal.tsx");const l="POST_CREATION__LOAD_DRAFT_MODAL_ID",m="POST_CREATION__MAX_DRAFTS_MODAL_ID",u="MARKDOWN_EDITOR__SWITCH_TO_RTE_MODAL_ID",p=(e,t)=>`postCreation.prompt.${e}.${t}`,h={body:p("default","body"),cancel:"postCreation.cancel",confirm:p("default","confirm"),title:p("default","title")},b=Object.assign({},h,{body:p("loadDraft","body"),confirm:p("loadDraft","confirm"),title:p("loadDraft","title")}),g=Object.assign({},h,{body:p("maxDrafts","body"),confirm:p("maxDrafts","confirm"),title:p("maxDrafts","title")}),f=Object.assign({},h,{body:p("switchToRTE","body"),confirm:p("switchToRTE","confirm"),title:p("switchToRTE","title")}),x={[l]:b,[m]:g,[u]:f},C=Object(a.c)({language:d.R}),E=Object(s.b)(C),v=(e,t)=>({bodyText:Object(i.a)(e,t.body),secondaryButtonText:Object(i.a)(e,t.cancel),primaryButtonText:Object(i.a)(e,t.confirm),titleText:Object(i.a)(e,t.title)});t.d=E(class extends r.a.PureComponent{constructor(){super(...arguments),this.onCancel=(()=>{this.props.onCancel(this.props.modalId)}),this.onConfirm=(()=>{this.props.onConfirm(this.props.modalId)})}render(){var e=this.props;const t=e.language,n=e.modalId;return r.a.createElement(c.a,Object.assign({},v(t,x[n]),{onClose:this.onCancel,onPrimaryAction:this.onConfirm,onSecondaryAction:this.onCancel}))}})},"./src/reddit/components/PostEditForm/index.m.less":function(e,t,n){e.exports={BottomRow:"_2tvWRsxtXPamngfOz-62jr",bottomRow:"_2tvWRsxtXPamngfOz-62jr",ErrorsContainer:"phYSLbf9ZU64a3GczUq5r",errorsContainer:"phYSLbf9ZU64a3GczUq5r",Editor:"_8uW3gzV8WqahKv77o2EFu",editor:"_8uW3gzV8WqahKv77o2EFu",isPending:"_2UWKes5OMhB-Rz2iVtBdKZ",FormContent:"_2ISPYodbQ3VsImJAFvLFDJ",formContent:"_2ISPYodbQ3VsImJAFvLFDJ",SubmitButton:"_1N8wF0OCvBu6gW4b4cpHhE",submitButton:"_1N8wF0OCvBu6gW4b4cpHhE",LoadingIcon:"_1FY2h-rhaxwcBudiw3Lc2d",loadingIcon:"_1FY2h-rhaxwcBudiw3Lc2d"}},"./src/reddit/components/PostEditForm/index.tsx":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/lodash/noop.js"),r=n.n(o),s=n("./node_modules/react/index.js"),a=n.n(s),i=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/react-router-redux/es/index.js"),c=n("./src/reddit/i18n/components.tsx"),l=n("./node_modules/reselect/es/index.js"),m=n("./src/app/strings/index.ts"),u=n("./src/lib/classNames/index.ts"),p=n("./src/reddit/helpers/correlationIdTracker.ts"),h=n("./src/reddit/models/PostCreationForm/index.ts"),b=n("./src/reddit/selectors/postCreations.ts"),g=n("./src/reddit/actions/postCreation/editing.ts"),f=n("./src/reddit/actions/postCreation/editorContent.ts"),x=n("./src/reddit/components/CommentCreation/NavigationModule/index.ts"),C=n("./src/lib/constants/index.ts"),E=n("./src/lib/memoizeByReference/index.ts"),v=n("./src/reddit/components/RichTextEditor/media/helpers.ts");const w=Object(E.a)((e,t,n)=>{const o=e.name,r=e.allowedPostTypes,s=Object(v.g)(t),a=((e,t,n,o)=>{if(!t)return null;let r="";return!e.total||t.images||t.videos?e.video&&!t.videos?r="postCreation.mediaInput.videosAreNotAllowed":!e.image&&!e.gifvideo||t.images||(r="postCreation.mediaInput.imagesAreNotAllowed"):r="postCreation.mediaInput.mediaAreNotAllowed",r?Object(m.a)(o,r,{subredditName:n}):null})(s,r,o,n);return a?[a]:((e,t)=>{const n=[];return e.image>C.R&&n.push(Object(m.a)(t,"postCreation.mediaInput.imagesLimitExceeded")),e.video+e.gifvideo>C.V&&n.push(Object(m.a)(t,"postCreation.mediaInput.videosLimitExceeded")),n})(s,n)});var O=n("./src/reddit/components/PostCreationForm/MarkdownEditor/index.tsx"),y=n("./src/reddit/components/RichTextEditor/index.tsx"),T=n("./src/reddit/components/RichTextEditor/RTEState/index.tsx"),j=n("./src/reddit/contexts/PageLayer/index.tsx"),M=n("./src/reddit/controls/ErrorText/index.tsx"),k=n("./src/reddit/helpers/richTextEditor/index.ts"),S=n("./src/reddit/selectors/user.ts"),_=n("./src/reddit/controls/Button/index.tsx"),R=n("./src/reddit/controls/LoadingIcon/index.tsx"),F=n("./src/reddit/components/PostEditForm/index.m.less"),B=n.n(F),I=n("./src/lib/lessComponent.tsx");const P=Object(m.e)("postCreation.rtfPlaceholderOptional"),H=Object(m.e)("postCreation.rtfPlaceholderRequired"),N=I.a.div("BottomRow",B.a),W=I.a.div("ErrorsContainer",B.a),A=I.a.div("FormContent",B.a),D=I.a.wrapped(_.f,"SubmitButton",B.a),L=I.a.wrapped(R.a,"LoadingIcon",B.a),z=Object(j.v)(),U=Object(l.c)({destSubreddit:b.g,editorMode:b.h,errorText:b.i,hasError:b.j,language:S.R,markdownDraft:b.k,pending:b.R,postingRequirements:(e,{pageLayer:t})=>{const n=Object(j.r)(e,{pageLayer:t});if(n)return e.subredditSettings.requirementsBySubreddit[n.name.toLowerCase()]},rteDraft:b.l,subreddit:j.r,uploads:e=>e.uploads,user:S.i}),K=Object(i.b)(U,(e,t)=>({onCancel:t=>e(g.b(t)),onSubmitDraft:t=>e(g.c(t)),onSuccess:t=>e(Object(d.b)(t)),onToggleEditorMode:(t,n)=>e(f.d(h.g.POST_EDITING,t,n))}));t.default=z(K(class extends a.a.Component{constructor(e){super(e),this.onEditorResize=(e=>{this.setState({editorHeight:e})}),this.onMarkdownPostChange=(e=>{const t=this.state.markdownBody,n=this.state.markdownPostDraftChanged||t.trim()!==e.trim();this.setState({markdownBody:e,markdownPostDraftChanged:n})}),this.onRichPostChange=((e,t)=>{this.setState({rteState:e,richtextPostDraftChanged:this.state.richtextPostDraftChanged||t})}),this.haveMarkdownPostDraft=(()=>!!(this.state.markdownBody||"").trim()),this.haveDraft=(()=>this.props.editorMode===h.h.RICH_TEXT?this.haveRichPostDraft():this.haveMarkdownPostDraft()),this.onSubmit=(()=>{const e=this.buildPostSubmission();e&&this.props.onSubmitDraft(e)}),this.onToggleEditorMode=(async(e,t)=>{this.setState({markdownPostDraftChanged:!1,richtextPostDraftChanged:!1}),await this.props.onToggleEditorMode(e,t),e===h.h.RICH_TEXT?this.rteRef&&this.rteRef.focus():this.markdownEditorRef&&this.markdownEditorRef.focus()}),this.getMediaValidationErrors=(()=>{var e=this.props;const t=e.editorMode,n=e.destSubreddit,o=e.language,r=this.state.rteState;return r.isBound&&t===h.h.RICH_TEXT?w(n,r.editorState.getCurrentContent(),o):[]}),this.getTextPostContent=(()=>{var e=this.props;const t=e.editorMode,n=e.uploads;var o=this.state;const r=o.markdownBody,s=o.rteState;return t===h.h.RICH_TEXT?T.a.toRichTextJSON(s,n):{markdown:r}}),this.buildPostSubmission=(()=>{const e=this.props.post;return Object.assign({post:e},this.getTextPostContent(),{validate_on_submit:!0})}),this.cancelEdit=(()=>{this.props.onCancel(this.props.post.id)}),this.setRteRef=(e=>this.rteRef=e),this.setMarkdownEditorRef=(e=>this.markdownEditorRef=e),this.state={markdownBody:e.markdownDraft,markdownPostDraftChanged:!1,richtextPostDraftChanged:!1,rteState:e.rteDraft}}componentDidMount(){Object(p.d)(p.a.PostComposer)}componentWillUnmount(){Object(p.b)(p.a.PostComposer),this.cancelEdit()}componentWillReceiveProps(e){e.rteDraft!==this.props.rteDraft&&this.setState({rteState:e.rteDraft,richtextPostDraftChanged:!0}),e.markdownDraft!==this.props.markdownDraft&&this.setState({markdownBody:e.markdownDraft,markdownPostDraftChanged:!0})}haveRichPostDraft(){const e=this.state.rteState;return T.a.hasContent(e)}hasChanged(){const e=this.props.editorMode;var t=this.state;const n=t.markdownPostDraftChanged,o=t.richtextPostDraftChanged;return e===h.h.RICH_TEXT?!!o:e===h.h.MARKDOWN&&!!n}render(){var e=this.props;const t=e.language,n=e.pending,o=e.editorMode,s=e.errorText,i=e.hasError,d=e.post,l=e.postingRequirements,p=e.uploads;var b=this.state;const g=b.markdownBody,f=b.markdownPostDraftChanged,C=b.richtextPostDraftChanged,E=b.rteState,v=l&&"required"===l.ruleBodyRequirement?H(t):P(t),w=this.getMediaValidationErrors(),j=i?[s||Object(m.a)(t,"error.type.generic")]:w,S=!T.a.isAllMediaUploaded(E,p);return a.a.createElement(A,null,o===h.h.RICH_TEXT?a.a.createElement(y.a,{allowMediaUploads:!0,className:Object(u.a)(B.a.Editor,{[B.a.isPending]:!!n}),destSubreddit:this.props.destSubreddit,editorType:k.a.Post,initialHeight:this.state.editorHeight,rteState:E,language:t,onChange:this.onRichPostChange,onEditorResize:this.onEditorResize,onSubmit:this.onSubmit,onSwitchEditorMode:this.onToggleEditorMode,readOnly:!!n,rteRef:this.setRteRef,trackToolbarClick:r.a,placeholderText:v}):a.a.createElement(O.a,{language:t,initialHeight:this.state.editorHeight,instanceRef:this.setMarkdownEditorRef,disabled:!!n,value:g,onChange:this.onMarkdownPostChange,onEditorResize:this.onEditorResize,onSubmit:this.onSubmit,onSwitchEditorMode:this.onToggleEditorMode,placeholderText:v}),a.a.createElement(N,null,a.a.createElement(_.n,{disabled:!!n,onClick:this.cancelEdit},a.a.createElement(c.c,null,"cancel")),a.a.createElement(D,{disabled:!!n||!!w.length||!this.hasChanged()||S,onClick:this.onSubmit},n?a.a.createElement(L,{sizePx:10}):Object(m.a)(t,"posts.save"))),a.a.createElement(W,null,!!j.length&&Object(M.b)(j,t)),a.a.createElement(x.a,{editKey:d.id,language:t,hasValue:!(!f&&!C),isPostEdit:!0}))}}))},"./src/reddit/components/RequestPendingBanner/index.m.less":function(e,t,n){e.exports={Banner:"_1AD-JX9FUzLgvv8A5yaVqV",banner:"_1AD-JX9FUzLgvv8A5yaVqV",Subtitle:"_1ljRPHbvpC41amZF9_xBeb",subtitle:"_1ljRPHbvpC41amZF9_xBeb"}},"./src/reddit/components/RequestPendingBanner/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/reselect/es/index.js"),i=n("./src/lib/lessComponent.tsx"),d=n("./src/reddit/components/InfoBanners/BannerBase/index.tsx"),c=n("./src/reddit/i18n/utils.ts"),l=n("./src/reddit/models/SubredditRestrictions/index.ts"),m=n("./src/reddit/selectors/platform.ts"),u=n("./src/reddit/selectors/subreddit.ts"),p=n("./src/reddit/components/RequestPendingBanner/index.m.less"),h=n.n(p);const b=i.a.wrapped(d.a,"Banner",h.a),g=Object(s.b)(()=>Object(a.c)({restrictions:u.n,subreddit:m.f}));t.a=g(({restrictions:e,subreddit:t})=>{if(!t)return null;const n=e===l.e.Comment?l.a.Create:l.a.Draft;return r.a.createElement(b,{subtitle:r.a.createElement("span",{className:h.a.Subtitle},Object(c.c)(`Your request to ${Object(c.b)("restrictions",l.d[e])} in r/${Object(c.b)("displayName",t.name)} was sent and is pending. In the meantime, you can ${Object(c.b)("action",l.c[n])} a post and `),r.a.createElement("a",{href:`${t.url}`},Object(c.c)("browse the community"))),title:Object(c.c)(`Request to ${Object(c.b)("restrictions",l.d[e])} is pending...`)})})},"./src/reddit/components/ResizableAutosizeTextarea/index.m.less":function(e,t,n){e.exports={editorWrapper:"VBa-xDMEbFi3vsO4id4OC",textareaAutosize:"_6Ej82J4aTDK36LLOcpFbC",mIsFullHeight:"aZb6a46diyLdUQJynW3aD"}},"./src/reddit/components/ResizableAutosizeTextarea/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./node_modules/react-autosize-textarea/lib/index.js"),a=n.n(s),i=n("./src/lib/classNames/index.ts"),d=n("./src/reddit/components/ResizableAutosizeTextarea/index.m.less"),c=n.n(d),l=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};const m=({className:e,children:t,editorWrapperRef:n,initialHeight:o})=>r.a.createElement("div",{className:Object(i.a)(c.a.editorWrapper,e),style:o?{height:o}:void 0,ref:n},t),u=e=>{var t=e.isFullHeight,n=e.textAreaRef,o=l(e,["isFullHeight","textAreaRef"]);return r.a.createElement(a.a,Object.assign({className:Object(i.a)(c.a.textareaAutosize,{[c.a.mIsFullHeight]:t}),innerRef:n},o))};t.a=class extends r.a.Component{constructor(e){super(e),this.editorHeight=null,this.editorRef=null,this.editorStyleMutationObserver=null,this.onEditorStyleChanged=(()=>{if(!this.editorRef)return;this.state.isResized||this.setState({isResized:!0});const e=this.editorRef.style.height?Number.parseInt(this.editorRef.style.height):null;this.editorHeight!==e&&(this.editorHeight=e,e&&this.props.onEditorResize&&this.props.onEditorResize(e))}),this.setEditorWrapperRef=(e=>this.editorRef=e),this.state={initialHeight:e.initialHeight,isResized:!!e.initialHeight}}componentDidMount(){this.editorRef&&(this.editorStyleMutationObserver=new MutationObserver(this.onEditorStyleChanged),this.editorStyleMutationObserver.observe(this.editorRef,{attributes:!0,attributeFilter:["style"]}))}componentWillUnmount(){this.editorStyleMutationObserver&&(this.editorStyleMutationObserver.disconnect(),this.editorStyleMutationObserver=null)}render(){const e=this.props,t=e.className,n=e.initialHeight,o=e.innerRef,s=(e.onEditorResize,l(e,["className","initialHeight","innerRef","onEditorResize"])),a=this.state.isResized;return r.a.createElement(m,{className:t,editorWrapperRef:this.setEditorWrapperRef,initialHeight:n},r.a.createElement(u,Object.assign({},s,{children:!0,isFullHeight:!!a,textAreaRef:o})))}}},"./src/reddit/components/RichTextEditor/Toolbar/CommentToolbar.m.less":function(e,t,n){e.exports={SectionSpacer:"_1_GKN8UW8t3pCAZhMgZOoL",sectionSpacer:"_1_GKN8UW8t3pCAZhMgZOoL"}},"./src/reddit/components/RichTextEditor/Toolbar/EmoteButton/index.m.less":function(e,t,n){e.exports={emote:"_3D93rMnM8022kmI5JTG4fb",emotes:"_2nE7oF1_HdWt-s31zYmYB6",emoteMask:"_26-n7Hn4ggLG2AJ7kmR8i6",smile:"kZEfwKUF_b6N-MPjQuYFA"}},"./src/reddit/components/RichTextEditor/Toolbar/GifButton/index.m.less":function(e,t,n){e.exports={rainbow:"_3o1yVY7yuN_Xzqg5RaAFp8",rainbowFade:"_3XlVOBsaD4vQFIAVPEpLFD"}},"./src/reddit/components/StructuredStyles/StyledComponents/forms.m.less":function(e,t,n){e.exports={FormPage:"_9ZuQyDXhFth1qKJF4KNm8",formPage:"_9ZuQyDXhFth1qKJF4KNm8",HomePageTitle:"_1JmnMJclrTwTPpAip5U_Hm",homePageTitle:"_1JmnMJclrTwTPpAip5U_Hm",HomePageBreadcrumb:"_2iNJX36LR2tMHx_unzEkVM",homePageBreadcrumb:"_2iNJX36LR2tMHx_unzEkVM",HomePageGroup:"_306gA2lxjCHX44ssikUp3O",homePageGroup:"_306gA2lxjCHX44ssikUp3O",FormPageTitle:"_1Omf6afKRpv3RKNCWjIyJ4",formPageTitle:"_1Omf6afKRpv3RKNCWjIyJ4",FormPageSection:"_2Ss7VGMX-UPKt9NhFRtgTz",formPageSection:"_2Ss7VGMX-UPKt9NhFRtgTz",FormGroup:"_3vWu4F9B4X4Yc-Gm86-FMP",formGroup:"_3vWu4F9B4X4Yc-Gm86-FMP",FormGroupTitle:"_2qAEe8HGjtHsuKsHqNCa9u",formGroupTitle:"_2qAEe8HGjtHsuKsHqNCa9u",FormElement:"c5RWd-O3CYE-XSLdTyjtI",formElement:"c5RWd-O3CYE-XSLdTyjtI",FormGroupDescription:"_3whORKuQps-WQpSceAyHuF",formGroupDescription:"_3whORKuQps-WQpSceAyHuF",FormItem:"_1Qk-ka6_CJz1fU3OUfeznu",formItem:"_1Qk-ka6_CJz1fU3OUfeznu",FormElementTitle:"_3ds8Wk2l32hr3hLddQshhG",formElementTitle:"_3ds8Wk2l32hr3hLddQshhG",FormElementDescription:"_1h0r6vtgOzgWtu-GNBO6Yb",formElementDescription:"_1h0r6vtgOzgWtu-GNBO6Yb",FormElementError:"horIoLCod23xkzt7MmTpC",formElementError:"horIoLCod23xkzt7MmTpC",FormElementSubGroup:"_33Iw1wpNZ-uhC05tWsB9xi",formElementSubGroup:"_33Iw1wpNZ-uhC05tWsB9xi",FormListItem:"_2M7LQbQxH40ingJ9h9RslL",formListItem:"_2M7LQbQxH40ingJ9h9RslL"}},"./src/reddit/components/StructuredStyles/StyledComponents/forms.ts":function(e,t,n){"use strict";n.d(t,"k",function(){return a}),n.d(t,"p",function(){return i}),n.d(t,"n",function(){return d}),n.d(t,"o",function(){return c}),n.d(t,"m",function(){return l}),n.d(t,"l",function(){return m}),n.d(t,"f",function(){return u}),n.d(t,"h",function(){return p}),n.d(t,"a",function(){return h}),n.d(t,"g",function(){return b}),n.d(t,"i",function(){return g}),n.d(t,"e",function(){return f}),n.d(t,"b",function(){return x}),n.d(t,"c",function(){return C}),n.d(t,"d",function(){return E}),n.d(t,"j",function(){return v});var o=n("./src/lib/lessComponent.tsx"),r=n("./src/reddit/components/StructuredStyles/StyledComponents/forms.m.less"),s=n.n(r);const a=o.a.section("FormPage",s.a),i=o.a.h1("HomePageTitle",s.a),d=o.a.button("HomePageBreadcrumb",s.a),c=o.a.div("HomePageGroup",s.a),l=o.a.h1("FormPageTitle",s.a),m=o.a.div("FormPageSection",s.a),u=o.a.div("FormGroup",s.a),p=o.a.h2("FormGroupTitle",s.a),h=o.a.div("FormElement",s.a),b=o.a.div("FormGroupDescription",s.a),g=o.a.div("FormItem",s.a),f=o.a.h3("FormElementTitle",s.a),x=o.a.div("FormElementDescription",s.a),C=o.a.div("FormElementError",s.a),E=o.a.div("FormElementSubGroup",s.a),v=o.a.li("FormListItem",s.a)},"./src/reddit/components/Widgets/ThemedWidget/index.m.less":function(e,t,n){e.exports={widgetBackground:"_1G4yU68P50vRZ4USXfaceV",clickable:"_2mtWlchu4uQf339v56bSha",redditStyle:"_2QeqBqfT5UbHBoViZUt-wX",truncatedGradient:"_1lvCNVth3dt5y8lu3vT95L",widgetHeader:"_ZhON3a3vplThB8NFwuJn",headerExp:"_1kKGybsCNXyvQc_qJCQIQe",widgetTitle:"_2sggAEfRQLyoAl4J__5twU",widgetContent:"TmgZY6tDcdErbE5d7E0HJ",widgetContentOnly:"_3RPJ8hHnfFohktLZca18J6",truncated:"r5dzQq7dgZyAmve8abbbt",seeMore:"_3dbp6Cm9uKkkIBr9EsU-qS"}},"./src/reddit/components/Widgets/ThemedWidget/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/reselect/es/index.js"),i=n("./src/lib/classNames/index.ts"),d=n("./src/lib/CSSVariableProvider/withTheme.tsx"),c=n("./src/reddit/components/SEOTitle/index.tsx"),l=n("./src/reddit/components/TrackingHelper/index.tsx"),m=n("./src/reddit/contexts/PageLayer/index.tsx"),u=n("./src/reddit/controls/Button/index.tsx"),p=n("./src/reddit/selectors/telemetry.ts");const h=(e,t)=>n=>Object.assign({source:"community_widgets",action:"click",noun:"see_more",widget:Object(p.widget)(n,{subredditId:e,widgetKind:t})},p.defaults);var b=n("./src/reddit/i18n/components.tsx"),g=n("./src/reddit/selectors/experiments/feedFilters.ts"),f=n("./src/reddit/selectors/experiments/topPosts.ts"),x=n("./src/reddit/selectors/structuredStyles.ts"),C=n("./src/reddit/selectors/user.ts"),E=n("./src/reddit/models/Theme/index.ts"),v=n("./src/reddit/models/Theme/NewColorSystem/index.ts");const w=e=>e.styles&&e.styles.backgroundColor?e.styles.backgroundColor:Object(v.a)(e).widgetColors.sidebarWidgetBackgroundColor,O=e=>e.styles&&e.styles.headerColor?e.styles.headerColor:Object(v.a)(e).widgetColors.sidebarWidgetHeaderColor,y=e=>{const t=w(e);return Object(E.f)(t)},T=e=>{const t=O(e);return Object(E.f)(t)};var j=n("./src/reddit/components/Widgets/ThemedWidget/index.m.less"),M=n.n(j);const k=Object(m.v)(),S=Object(s.b)(()=>Object(a.c)({feedFilterVariant:g.a,forceRedditStyle:(e,t)=>{const n=Object(m.n)(e,t)||void 0,o=t.redditStyle||Object(x.m)(e,{subredditId:n}),r=Object(C.T)(e);return o||r},subredditId:m.n,topPostVariant:f.d}));t.a=k(S(Object(d.a)(Object(l.b)(class extends r.a.Component{constructor(){super(...arguments),this.contentRef=r.a.createRef(),this.state={isTruncated:!1},this.handleSeeMoreClick=(()=>{var e=this.props;const t=e.subredditId,n=e.widgetKind;t&&n&&this.props.sendEvent(h(t,n)),this.setState({isTruncated:!1})})}componentDidMount(){const e=this.contentRef.current,t=e&&e.offsetHeight;this.props.truncateThreshold&&t&&t>this.props.truncateThreshold&&this.setState({isTruncated:!0})}getWidgetBackgroundStyles(){const e={};return e.backgroundColor=w(this.props),e.color=e.fill=y(this.props),e}getWidgetHeaderStyles(){const e={};return e.backgroundColor=O(this.props),e.color=e.fill=T(this.props),e}render(){var e=this.props;const t=e.children,n=e.className,o=e.contentOnly,s=e.feedFilterVariant,a=e.forceRedditStyle,d=e.headerButton,l=e.onClick,m=e.title,p=e.topPostVariant,h=e.truncateThreshold,f=o?M.a.widgetContentOnly:M.a.widgetContent,x=Object(g.f)(s),C=!!p,E=!a&&this.props.styles&&!x&&!C,v=E?this.getWidgetBackgroundStyles():{},w=E?this.getWidgetHeaderStyles():{};return r.a.createElement("div",{className:Object(i.a)(n,M.a.widgetBackground,{[M.a.redditStyle]:a,[M.a.clickable]:!!l,[M.a.truncatedGradient]:this.state.isTruncated&&!this.props.noGradient}),"data-redditstyle":a,onClick:l,style:v},m&&r.a.createElement("div",{className:Object(i.a)(M.a.widgetHeader,{[M.a.headerExp]:x||C}),style:w},r.a.createElement("div",{className:Object(i.a)(M.a.widgetTitle,{[M.a.headerExp]:x||C})},r.a.createElement(c.b,{type:c.a.Widget},m)),d),r.a.createElement("div",{className:Object(i.a)(f,{[M.a.truncated]:this.state.isTruncated}),ref:this.contentRef,style:{maxHeight:this.state.isTruncated?h:"none"}},t),this.state.isTruncated&&r.a.createElement(u.n,{className:M.a.seeMore,onClick:this.handleSeeMoreClick},r.a.createElement(b.c,null,"See More")))}}))))},"./src/reddit/constants/accountManager.ts":function(e,t,n){"use strict";var o,r,s;n.d(t,"b",function(){return o}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return s}),function(e){e.Index="/login/",e.Register="/register/"}(o||(o={})),function(e){e.Close="close",e.CreateAccount="createAccount",e.Login="login",e.Register="register",e.Resize="resize",e.Subscribe="subscribe"}(r||(r={})),function(e){e.Embed="embed",e.Modal="modal"}(s||(s={}))},"./src/reddit/controls/HelpfulTooltip/index.m.less":function(e,t,n){e.exports={iconWrapper:"_2jhMYYIyWfC22MBJXfjc_j",close:"Ox8QhMwI_pG4DcRAicFqa",tooltip:"_3ks0MaOGG46svtYF11UgzA",fadeIn:"G_Qeda7XitCcKYjxHAP-D",helpfulTooltip:"_3bxQwDiY1JejDtESIEAiwn"}},"./src/reddit/controls/ToggleSwitch/index.m.less":function(e,t,n){e.exports={toggleDisplay:"_2FKpII1jz0h6xCAw1kQAvS",toggleSwitch:"_2e2g485kpErHhJQUiyvvC2",mActive:"_1L5kUnhRYhUJ4TkMbOTKkI",mDisabled:"_3clF3xRMqSWmoBQpXv8U5z"}},"./src/reddit/controls/ToggleSwitch/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./src/lib/classNames/index.ts"),a=n("./src/reddit/controls/ToggleSwitch/index.m.less"),i=n.n(a);t.a=(e=>r.a.createElement("button",{"aria-checked":e.on,className:Object(s.a)(i.a.toggleSwitch,e.className,{[i.a.mActive]:e.on&&!e.disabled,[i.a.mDisabled]:e.disabled}),style:e.on&&!e.disabled&&e.activeColorOverride?{backgroundColor:e.activeColorOverride}:void 0,id:e.id,role:"switch",tabIndex:e.tabIndex,type:"button",onClick:()=>!e.disabled&&e.onToggle&&e.onToggle()},r.a.createElement("div",{className:i.a.toggleDisplay})))},"./src/reddit/endpoints/economics/emojis.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return a});var o=n("./src/config.ts"),r=n("./src/reddit/endpoints/governance/requester.ts");const s=(e,t)=>Object(r.a)(e,{method:"post",endpoint:`${o.a.metaUrl}/orders`,data:{price:"0",currency:"usd",products:[{productId:t.productId,quantity:"1"}],subredditId:t.subredditId}}),a=(e,t)=>Object(r.a)(e,{method:"get",endpoint:`${o.a.metaUrl}/product-collections/${t}?types=emotes_pack`})},"./src/reddit/endpoints/economics/specialMembership.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return l}),n.d(t,"e",function(){return m}),n.d(t,"d",function(){return u}),n.d(t,"f",function(){return p});var o=n("./src/config.ts"),r=n("./src/lib/omitHeaders/index.ts"),s=n("./src/reddit/constants/headers.ts"),a=n("./src/reddit/endpoints/governance/requester.ts"),i=n("./src/reddit/helpers/r2/normalizeSubredditFromR2/index.ts");function d(e,t){return Object(a.a)(e,{endpoint:`${o.a.metaUrl}/communities/${t.subredditId}/me`,method:"patch",data:{specialMemberships:{settings:{renew:!1}}}})}function c(e){return Object(a.a)(e,{endpoint:`${o.a.metaUrl}/users/me`,method:"get"}).then(e=>e.ok?e.body.specialMemberships?Object.assign({},e,{body:e.body.specialMemberships}):Object.assign({},e,{body:{}}):e)}function l(e,t){return Object(a.a)(e,{endpoint:`${o.a.metaUrl}/ps/me/braintree-client-tokens`,method:"post",data:{username:t&&t.username}})}function m(e,t){return Object(a.a)(e,{endpoint:`${o.a.metaUrl}/orders`,method:"post",data:{currency:"usd",orderTarget:"special_membership",price:t.price,products:[{productId:"membership",quantity:"1"}],providerArgs:{paymentNonce:t.nonce,savePaymentMethod:!0},providerName:"braintree",subredditId:t.subredditId,targetArgs:{renew:!0,receiverName:t.username}}})}function u(e,t){return Object(a.a)(e,{endpoint:`${o.a.metaUrl}/orders`,method:"post",data:{currency:"usd",orderTarget:"special_membership",price:t.price,products:[{productId:"membership",quantity:t.numMonths}],providerArgs:{paymentNonce:t.nonce,savePaymentMethod:!1},providerName:"braintree",subredditId:t.subredditId,targetArgs:{renew:!1},recipientUserName:t.recipientUsername,anonymousGift:t.isAnonymous}})}function p(e,t){return Object(a.a)(Object(r.a)(e,[s.a]),{endpoint:`${e.apiUrl}/api/info?id=${t.join(",")}`,method:"get"}).then(e=>{if(e.ok){const t=e.body.data.children.map(({data:e})=>Object(i.a)(e)).reduce((e,t)=>(e[t.id]=t,e),{});return Object.assign({},e,{body:t})}return e})}},"./src/reddit/endpoints/economics/subredditPremium.ts":function(e,t,n){"use strict";var o=n("./node_modules/lodash/merge.js"),r=n.n(o),s=n("./src/config.ts"),a=n("./src/reddit/endpoints/governance/badges.ts"),i=n("./src/reddit/endpoints/governance/community.ts"),d=n("./src/reddit/endpoints/governance/products/badges.ts"),c=n("./src/reddit/endpoints/governance/requester.ts");n.d(t,"a",function(){return m}),n.d(t,"b",function(){return u});var l=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,s=void 0;try{for(var a,i=e[Symbol.iterator]();!(o=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(d){r=!0,s=d}finally{try{!o&&i.return&&i.return()}finally{if(r)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();async function m(e,t,n){const o={subredditId:t,badges:{},errors:{},collections:{},products:{},subscription:void 0,userOwnedBadges:[]},m=function(e,t){return Object(c.a)(e,{method:"get",endpoint:`${s.a.metaUrl}/product-collections/${t}?types=badge`})}(e,t),u=Object(i.a)(e,{subredditId:t}),p=Object(d.a)(e,t),h=Object(a.c)(e,t,n);var b=await Promise.all([m,u,p,h]),g=l(b,4);const f=g[0],x=g[1],C=g[2],E=g[3];if(f.ok?o.collections=f.body:o.errors.collections=f.error,x.ok){const e=x.body;o.subscription=e.specialMemberships,o.communityRaw=e}return C.ok?o.products=C.body:o.errors.products=C.error,E.ok?(r()(o.badges,E.body.badges),o.userOwnedBadges=E.body.userOwnedBadges):o.errors.userBadges=E.error,o}const u=(e,t)=>Object(c.a)(e,{endpoint:`${s.a.metaUrl}/products/${t}?types=badge,membership`,method:"delete"})},"./src/reddit/helpers/trackers/monthsToMinutes.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"e",function(){return m}),n.d(t,"h",function(){return u}),n.d(t,"g",function(){return h}),n.d(t,"f",function(){return b});var o=n("./src/reddit/selectors/subreddit.ts"),r=n("./src/reddit/selectors/telemetry.ts");const s=e=>Object.assign({},r.defaults(e),{actionInfo:r.actionInfo(e,{settingValue:"top_banner"}),noun:"account_complete",source:"banner"}),a=()=>e=>Object.assign({},s(e),{action:"view"}),i=e=>t=>Object.assign({},s(t),{action:"click",banner:{id:e,buttonText:e}}),d=e=>Object.assign({},r.defaults(e),{source:"community_manager"}),c=e=>t=>Object.assign({},d(t),{action:"click",noun:"subreddit_name",subreddit:{id:Object(o.H)(t,e),name:e}}),l=e=>t=>Object.assign({},d(t),{action:"click",noun:"remove_subreddit",subreddit:{id:Object(o.H)(t,e),name:e}}),m=()=>e=>Object.assign({},r.defaults(e),{action:"click",noun:"sign_up",source:"id_card"}),u=e=>t=>Object.assign({},r.defaults(t),{action:"click",noun:e,source:"community_nav"}),p=e=>Object.assign({},r.defaults(e),{noun:"starter_home",source:"banner"}),h=()=>e=>Object.assign({},p(e),{action:"view"}),b=()=>e=>Object.assign({},p(e),{action:"click",actionInfo:r.actionInfo(e,{reason:"close"})})},"./src/reddit/icons/fonts/Coin/index.m.less":function(e,t,n){e.exports={CoinIcon:"_12xlue8dQ1odPw1J81FIGQ",coinIcon:"_12xlue8dQ1odPw1J81FIGQ"}},"./src/reddit/icons/fonts/Coin/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./src/reddit/constants/colors.ts"),a=n("./src/reddit/icons/fonts/helpers.tsx"),i=n("./src/reddit/icons/fonts/Coin/index.m.less"),d=n.n(i);const c=n("./src/lib/lessComponent.tsx").a.wrapped(e=>r.a.createElement("i",{className:`${Object(a.b)("coin")} ${e.className}`,style:{color:e.fillColor||s.a.gold}}),"CoinIcon",d.a);t.a=c},"./src/reddit/icons/svgs/ChevronDown/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o);t.a=(e=>r.a.createElement("svg",{className:e.className,viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",onClick:e.onClick},r.a.createElement("g",null,r.a.createElement("polygon",{fill:"inherit",points:"11.0584 4.0602 6.0292 9.0894 1 4.0602 2.0608 3 6.0292 6.9684 9.9982 3"}))))},"./src/reddit/icons/svgs/FormattingOrderedList/index.m.less":function(e,t,n){e.exports={icon:"_1fQOXfyxB1SmgMOi7sihQV"}},"./src/reddit/icons/svgs/FormattingOrderedList/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./src/lib/classNames/index.ts"),a=n("./src/reddit/icons/svgs/FormattingOrderedList/index.m.less"),i=n.n(a);t.a=(e=>r.a.createElement("svg",{className:Object(s.a)(i.a.icon,e.className),style:e.style,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M4.78,5.15H4.15V2H3.09a1,1,0,0,1-.73.25V3a1.84,1.84,0,0,0,.7-.17V5.15H2.35V6H4.78Z"}),r.a.createElement("path",{d:"M3.62,8.88c.25,0,.39.12.39.35s-.17.41-.77.78c-1,.63-1.15,1.21-1.15,1.78V12H5v-.85H3.31c.06-.16.22-.35.72-.64.81-.43,1-.87,1-1.32C5,8.47,4.58,8,3.65,8A1.76,1.76,0,0,0,2.08,9l.72.52A1.07,1.07,0,0,1,3.62,8.88Z"}),r.a.createElement("path",{d:"M4.43,15.87A.82.82,0,0,0,5,15.05C5,14.4,4.53,14,3.65,14a2.15,2.15,0,0,0-1.51.61l.55.64a1.24,1.24,0,0,1,.88-.39c.27,0,.41.12.41.32s-.15.38-.67.38H3v.72h.31c.53,0,.76.13.76.46s-.15.42-.57.42a1.05,1.05,0,0,1-.85-.5L2,17.21A1.83,1.83,0,0,0,3.57,18c.94,0,1.55-.43,1.55-1.24A.87.87,0,0,0,4.43,15.87Z"}),r.a.createElement("path",{d:"M17,9H8a1,1,0,0,0,0,2h9a1,1,0,0,0,0-2Z"}),r.a.createElement("path",{d:"M17,15H8a1,1,0,0,0,0,2h9a1,1,0,0,0,0-2Z"}),r.a.createElement("path",{d:"M8,5h9a1,1,0,0,0,0-2H8A1,1,0,0,0,8,5Z"})))},"./src/reddit/icons/svgs/Help/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o);t.a=(e=>r.a.createElement("svg",{className:e.className,viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fill:"inherit",d:"M8.622 10.616c.078.08.14.175.183.28.044.105.07.218.07.332 0 .237-.087.456-.253.62-.167.168-.385.255-.622.255-.236 0-.455-.087-.62-.254-.167-.166-.255-.385-.255-.622 0-.114.027-.227.07-.332.044-.105.105-.2.184-.28.087-.088.174-.15.288-.193.324-.13.71-.052.954.193zm-.205-6.242c1.595 0 2.466.807 2.466 1.92 0 .976-.556 1.448-1.238 1.816-.615.317-.83.518-.904.898 0 .004-.034.207-.036.21-.034.126-.087.244-.18.336-.14.14-.323.21-.524.21-.097 0-.192-.017-.29-.052-.087-.035-.165-.088-.235-.158-.14-.14-.22-.333-.22-.533 0-.11.02-.188.074-.348.16-.472.55-.896 1.056-1.17.577-.327.84-.558.84-1.07 0-.42-.357-.715-.987-.715-.496 0-.996.218-1.39.52-.26.2-.62.202-.858-.02l-.05-.05c-.313-.29-.27-.787.075-1.04.603-.444 1.394-.753 2.4-.753zM8 13.25c-2.895 0-5.25-2.355-5.25-5.25S5.105 2.75 8 2.75 13.25 5.105 13.25 8 10.895 13.25 8 13.25M8 1C4.14 1 1 4.14 1 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7"})))},"./src/reddit/icons/svgs/Smile/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o);t.a=(e=>r.a.createElement("svg",{className:e.className,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.a.createElement("path",{fill:"inherit",fillRule:"evenodd",d:"M13 9.0074c-.777 0-1.406-.63-1.406-1.406 0-.777.629-1.407 1.406-1.407.777 0 1.406.63 1.406 1.407 0 .776-.629 1.406-1.406 1.406m-3 5.581c-2.206 0-4-1.57-4-3.5 0-.276.224-.5.5-.5h7c.276 0 .5.224.5.5 0 1.93-1.794 3.5-4 3.5m-3-8.394c.777 0 1.406.63 1.406 1.407 0 .776-.629 1.406-1.406 1.406-.777 0-1.406-.63-1.406-1.406 0-.777.629-1.407 1.406-1.407m3-4.194c-4.411 0-8 3.588-8 8 0 4.411 3.589 8 8 8s8-3.589 8-8c0-4.412-3.589-8-8-8"})))},"./src/reddit/layout/row/RightAlign/index.m.less":function(e,t,n){e.exports={rightAligned:"_1sEFSGIUpFtX1hzGDyWJpr"}},"./src/reddit/layout/row/RightAlign/index.tsx":function(e,t,n){"use strict";var o=n("./src/lib/lessComponent.tsx"),r=n("./src/reddit/layout/row/RightAlign/index.m.less"),s=n.n(r);t.a=o.a.div("rightAligned",s.a)}}]);
//# sourceMappingURL=RichTextEditor.f093af806bce8e0e09c7.js.map