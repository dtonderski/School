(window.webpackJsonp=window.webpackJsonp||[]).push([["CollectionCommentsPage~CommentsPage~Explore~Frontpage~GovernanceReleaseNotesModal~ModListing~ModQueu~900871b8"],{"./src/lib/intersectionObserver/index.ts":function(e,t,i){"use strict";let s;i.d(t,"a",function(){return n}),i.d(t,"b",function(){return r});const o=new Map,a=new Map;"undefined"!=typeof window&&(i("./node_modules/intersection-observer/intersection-observer.js"),s=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target,i=e.intersectionRatio>0;if(i!==!!a.get(t)){a.set(t,i);const s=o.get(t);if(s){s(e,i&&!!a.get(t))}}})},{threshold:[.001]}));const n=(e,t)=>{try{o.set(e,t),s&&s.observe(e)}catch(i){0}},r=e=>{try{o.delete(e),s&&s.unobserve(e)}catch(t){0}}},"./src/lib/onFocusAndVisibilityChange/index.ts":function(e,t,i){"use strict";var s,o=i("./node_modules/brcast/dist/brcast.es.js"),a=i("./node_modules/lodash/findKey.js"),n=i.n(a);!function(e){e.Hidden="hidden",e.Visible="visible"}(s||(s={}));const r={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};let d=!1;const l=Object(o.a)({documentInFocus:!0});!function(){if(!d){const e=n()(r,(e,t)=>void 0!==document[t]);e&&document.addEventListener(r[e],()=>{l.setState({documentInFocus:document.visibilityState!==s.Hidden})}),d=!0}}(),t.a={subscribe:e=>{return l.subscribe(e)},unsubscribe:e=>{l.unsubscribe(e)}}},"./src/reddit/components/Media/RichTextContainer/index.m.less":function(e,t,i){e.exports={richTextContainer:"Chtkt3BCZQruf0LtmFg2c",richTextContainerTitleOnly:"_2XNPI46MXRfDdsSoDqaksI",richTextContainerFull:"_3xX726aBn29LDbsDtzr_6E",placeholder:"_1aLU7RPNLdvfcbaNdcN11x",placeholderParagraph:"Owi9iYzjyVpDq_0YbCdJY",cleanupVariant:"_3lWzS77ngxpYib6BG4v9TE"}},"./src/reddit/components/Media/index.m.less":function(e,t,i){e.exports={hiddenLink:"_3dhFVFchWAAFXfLFTa94n9",displayNone:"_1Q2mF3u7v9hBVu_4bkC7R4",tweetPlaceholder:"_2IH8Z3uOFGn-TNLufw92zH",tweetEmbedBox:"_3G3xLNIwS59eiRVMICfR7x",isInvisible:"_1kw4-YNb840sdETnjL3_D3",tweetDeleted:"_2PLbyT4mrdGJGH5LY9Eotl"}},"./src/reddit/components/Media/index.tsx":function(e,t,i){"use strict";var s=i("./node_modules/lodash/debounce.js"),o=i.n(s),a=i("./node_modules/react/index.js"),n=i.n(a),r=i("./src/lib/classNames/index.ts"),d=i("./src/lib/CSSVariableProvider/withTheme.tsx"),l=i("./src/lib/env/index.ts"),c=i("./src/lib/intersectionObserver/index.ts"),p=i("./src/lib/isUrl/index.ts"),h=i("./src/lib/onFocusAndVisibilityChange/index.ts"),u=i("./src/lib/permalinkToOverlayLocation/index.ts"),m=i("./src/lib/raven/index.ts"),b=i("./src/reddit/components/HTML5StreamPlayer/index.tsx"),g=i("./src/reddit/components/Media/EmbedBox/index.tsx"),f=i("./src/reddit/components/Media/ImageBox/index.tsx"),x=i("./src/reddit/components/Media/MediaContainer/index.tsx"),w=i("./src/reddit/constants/componentSizes.ts"),v=i("./src/reddit/models/Media/index.ts"),C=i("./node_modules/react-redux/es/index.js"),E=i("./src/reddit/actions/post.ts"),y=i("./src/reddit/helpers/styles/mixins/loading.ts"),O=i("./src/reddit/components/Media/RichTextContainer/index.m.less"),S=i.n(O);var j=Object(C.b)(null,e=>({onLoadRichTextContentIfNeeded:t=>e(Object(E.s)(t))}))(class extends n.a.Component{componentDidMount(){this.loadRichTextContentIfNeeded()}loadRichTextContentIfNeeded(){this.props.canLoadContent&&this.props.isExpando&&this.props.onLoadRichTextContentIfNeeded(this.props.postId)}render(){const e=Object(y.a)({isLoading:!0});return n.a.createElement("div",{className:S.a.placeholder},[1,2,3].map(t=>n.a.createElement("div",{key:t,className:S.a.placeholderParagraph},n.a.createElement("div",{className:e}),n.a.createElement("div",{className:e}),n.a.createElement("div",{className:e}))))}}),N=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};var I=e=>{var t=e.canLoadContent,i=e.children,s=e.className,o=e.isCleanupVariant,a=e.isCommentsPage,d=e.isMediumHeight,l=e.isRichTextTruncated,c=e.isExpando,p=e.isTitleOnly,h=e.postId,u=e.showFull,m=N(e,["canLoadContent","children","className","isCleanupVariant","isCommentsPage","isMediumHeight","isRichTextTruncated","isExpando","isTitleOnly","postId","showFull"]);const b={[S.a.richTextContainerFull]:u,[S.a.richTextContainerTitleOnly]:p&&!u,[S.a.richTextContainer]:!u&&!p,[S.a.cleanupVariant]:o},g={};u||(g.maxHeight=p?`${v.l}px`:d?`${v.k}px`:`${v.j}px`),a&&(g.maxWidth=`${w.e}px`);const f=l&&u;return n.a.createElement("div",Object.assign({className:Object(r.a)(b,s),style:g},m),i,f&&n.a.createElement(j,{canLoadContent:!!t,isExpando:c,postId:h}))},M=i("./src/reddit/components/Media/VideoBox/index.tsx"),L=i("./src/reddit/components/PlayButton/index.tsx"),T=i("./src/reddit/helpers/styles/postBackgroundColor.ts"),P=i("./src/reddit/helpers/styles/smartTextColor.ts"),W=i("./src/reddit/components/RawHTMLDisplay/index.tsx"),F=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};var V=Object(d.a)(e=>{var t=e.flairStyleTemplate,i=F(e,["flairStyleTemplate"]);return n.a.createElement(W.a,Object.assign({style:{color:Object(P.a)(Object(T.a)(Object.assign({flairStyleTemplate:t},i)))}},i))}),R=i("./src/reddit/components/RichTextJson/index.tsx"),B=i("./src/reddit/constants/screenWidths.ts"),D=i("./src/reddit/helpers/canPreviewSelfText/index.ts"),H=i("./src/reddit/helpers/getRichTextContent.ts"),k=i("./src/reddit/helpers/postHasSelfText/index.ts"),A=i("./src/lib/redditId/index.ts");function _(e,t){const i=function e(t,i){let s=!1;let o=[];try{for(const a of t)if("link"===a.e&&a.u&&a.u.includes(`https://www.reddit.com/poll/${i}`))s=!0;else if(a.c&&"string"!=typeof a.c){const t=e(a.c,i);t.found?(s=!0,("par"!==a.e||t.updated.length)&&o.push(Object.assign({},a,{c:t.updated}))):o.push(a)}else o.push(a)}catch(a){s=!1,o=[]}return{found:s,updated:s?o:t}}(e.document,Object(A.c)(t));return i.found?{document:i.updated}:e}var G=i("./src/reddit/i18n/utils.ts"),U=i("./src/reddit/selectors/experiments/postCleanup.ts");const J=(e,t,i,s)=>{const o=e/t,a=i/s;return Math.abs(o-a)<.03},$=(e,t)=>{for(let i=0;i<t.length;i++){const s=t[i];if(s.width>=e)return s}},z=(e,t,i)=>{for(let s=0;s<i.length;s++){const o=i[s];if(o.width>=v.e/2&&J(e,t,o.height,o.width))return o}},Y=e=>{for(let t=0;t<e.length;t++){const i=e[t];if(i.height>=v.e||i.width>=v.f)return i}};var X=i("./src/reddit/components/Media/index.m.less"),q=i.n(X),Q=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],s=!0,o=!1,a=void 0;try{for(var n,r=e[Symbol.iterator]();!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(d){o=!0,a=d}finally{try{!s&&r.return&&r.return()}finally{if(o)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();const Z=1200,K=350,ee=100,te=300,ie="https://www.redditmedia.com",se=75,oe="player.js",ae=w.s+w.r,ne=e=>e.isVisible?e.children:n.a.createElement("div",{className:q.a.displayNone},e.children),re=new Set([v.o.EMBED,v.o.GIFVIDEO,v.o.VIDEO]),de=e=>!!e.media&&re.has(e.media.type),le=new Set([v.o.EMBED,v.o.GIFVIDEO,v.o.IMAGE,v.o.VIDEO]),ce=({post:e,postCleanupVariant:t,goldPostRefactorVariant:i})=>!!e.media&&le.has(e.media.type)||!!t&&Object(U.a)(e)||!!i&&Object(U.a)(e);t.a=Object(d.a)(class extends n.a.Component{constructor(e){super(e),this.pauseContent=(()=>{this.shouldFocusContentDebouncer(!1)}),this.stopContent=(()=>{const e=this.props.post.media;if(e&&v.d.has(e.type)){if(this.iframe){const t=e.type===v.o.EMBED?e.provider:null;this.pauseEmbed(this.iframe,t)}this.setState(e=>e.shouldStop?null:{shouldStop:!0})}}),this.handleVisibilityChange=(e=>{const t=this.state.shouldPause,i=this.props.autoplayPref;this.iframe&&(t||!i&&e.documentInFocus||this.toggleEmbedAutoplay(this.iframe,!e.documentInFocus)),this.setState({forcePause:!e.documentInFocus})}),this.focusContent=(()=>{this.shouldFocusContentDebouncer(!0)}),this.loadContent=(()=>{this.setState(e=>e.canLoadContent?null:{canLoadContent:!0})}),this.unmountContent=(()=>{}),this.contentIsHeavyToMount=(()=>{const e=this.props.post.media;return!!e&&v.d.has(e.type)}),this.shouldFocusContentDebouncer=o()(e=>{const t=this.props.post.media,i=this.props.autoplayPref;if(t&&v.d.has(t.type)){if(this.iframe){const s=t.type===v.o.EMBED?t.provider:null;s&&!v.r.has(s)?!i&&e||this.toggleEmbedAutoplay(this.iframe,!e):e||this.pauseEmbed(this.iframe,s)}e?this.setState(e=>e.shouldPause||!e.canLoadContent?{canLoadContent:!0,shouldPause:!1,shouldStop:!1}:null):this.setState(e=>e.shouldPause?null:{shouldPause:!0})}},250,{leading:!0}),this.toggleEmbedAutoplay=((e,t)=>{if(e.contentWindow){const i=t?v.g.Pause:v.g.Play;e.contentWindow.postMessage({context:oe,method:i},ie),e.contentWindow.postMessage({context:oe,method:v.g.Mute},ie)}}),this.pauseEmbed=((e,t)=>{e.contentWindow&&(t===v.u.YouTube?e.contentWindow.postMessage(JSON.stringify({event:"command",func:v.y.Pause}),ie):e.contentWindow.postMessage({context:oe,method:v.g.Pause},ie))}),this.onIframeLoaded=(()=>{const e=this.props.post.media,t=this.props.autoplayPref,i=e&&e.type===v.o.EMBED?e.provider:null;if(this.iframe&&i&&!v.r.has(i)){const e=this.state.shouldPause;(t||e)&&this.toggleEmbedAutoplay(this.iframe,e)}}),this.onImageBoxClick=(e=>{this.props.isListing||!this.shouldBlur()||this.state.isRevealed||(this.setState({isRevealed:!0}),e.preventDefault(),e.stopPropagation())}),this.storeChildRef=(e=>{this.iframe=e,this.iframe&&this.props.post.media&&"embed"===this.props.post.media.type&&this.props.post.media.provider===v.u.Twitter&&c.a(this.iframe,(e,t)=>{this.iframe&&this.iframe.contentWindow&&this.props.post.media&&"embed"===this.props.post.media.type&&!this.props.post.media.height&&t&&this.iframe.contentWindow.postMessage("twitter-measure-requested",ie)})}),this.updateDimensions=(()=>{this.setState({viewportHeight:window.innerHeight,viewportWidth:window.innerWidth})}),this.isSpoiler=(()=>this.props.post.isSpoiler||!(!this.props.crosspost||!this.props.crosspost.isSpoiler)),this.isNSFW=(()=>this.props.post.isNSFW||!(!this.props.crosspost||!this.props.crosspost.isNSFW)),this.state={canLoadContent:e.shouldLoad||!1,forcePause:!1,isRevealed:!1,shouldPause:void 0===e.shouldPause||e.shouldPause,shouldStop:void 0===e.shouldStop||e.shouldStop,viewportHeight:v.e,viewportWidth:v.f}}componentWillMount(){"undefined"!=typeof window&&(this.updateDimensions(),window.addEventListener("resize",this.updateDimensions))}componentDidMount(){de(this.props.post)&&(this.visibilityChangeSubscriptionId=h.a.subscribe(e=>{this.handleVisibilityChange(e)})),this.props.scrollerItemRef&&ce(this.props)&&this.props.scrollerItemRef(this,this.state.canLoadContent)}componentWillUnmount(){this.visibilityChangeSubscriptionId&&h.a.unsubscribe(this.visibilityChangeSubscriptionId),this.props.scrollerItemRef&&ce(this.props)&&this.props.scrollerItemRef(void 0),window.removeEventListener("resize",this.updateDimensions),this.iframe&&this.props.post.media&&"embed"===this.props.post.media.type&&this.props.post.media.provider===v.u.Twitter&&c.b(this.iframe)}componentWillReceiveProps(e){!this.state.canLoadContent&&e.shouldLoad&&this.setState({canLoadContent:!0}),void 0!==e.shouldPause&&e.shouldPause!==this.props.shouldPause&&this.shouldFocusContentDebouncer(!e.shouldPause)}getVideoExpandoMaxDimensions(){let e,t=Math.max(v.i,this.state.viewportHeight),i=Math.min(Z,16*t/9);i===Z&&(t=9*Z/16),e=this.state.viewportWidth>=B.c?this.state.viewportWidth<w.m?this.state.viewportWidth-ae-2*se:this.state.viewportWidth-ae-w.f-2*se:this.state.viewportWidth-2*se;const s=this.state.viewportHeight-2*se;if(i>e)t*=e/i,i=e;else if(t>s){const e=s/t;t=s,i*=e}return{maxVideoHeight:t,maxVideoWidth:i}}getVideoMaxDimensions(e,t){let i=v.i,s=v.n;return e.isExpando?this.getVideoExpandoMaxDimensions():(e.isPromotedTrend?(i=v.s,s=v.t):t.viewportWidth<B.c&&(i=v.m),{maxVideoHeight:i,maxVideoWidth:s})}getMediaInfo(e,t=this.state){const i=e.availableWidth,s=e.goldPostRefactorVariant,o=e.post,a=o.media&&o.media.obfuscated||"";let n=o.media&&!Object(v.F)(o.media)?o.media.content:"";var r=!o.media||Object(v.D)(o.media)||Object(v.E)(o.media)?[0,0]:[o.media.height,o.media.width],d=Q(r,2);let l=d[0],c=d[1];if(i&&o.media&&(o.media.type===v.o.IMAGE||o.media.type===v.o.GIFVIDEO)){const e=$(i,o.media.resolutions);e&&(n=e.url,c=e.width,l=e.height)}else if(i&&o.preview&&(e.postCleanupVariant||s)&&Object(U.a)(o))n=o.preview.url,c=o.preview.width,l=o.preview.height;else if(o&&o.media&&(!e.isListing||e.isExpando)&&(o.media.type===v.o.IMAGE||o.media.type===v.o.GIFVIDEO)){let e;(e=Object(f.b)(o.media.height,o.media.width)&&Object(f.c)(o.media.height)?z(o.media.height,o.media.width,o.media.resolutions):Y(o.media.resolutions))&&(n=e.url,c=e.width,l=e.height)}if(e.isExpando)if(c>t.viewportWidth)l*=t.viewportWidth/c,c=t.viewportWidth;else if(l>t.viewportHeight){const e=t.viewportHeight/l;l=t.viewportHeight,c*=e}var p=this.getVideoMaxDimensions(e,t);const h=p.maxVideoHeight,u=p.maxVideoWidth;if(o.media&&o.media.type===v.o.VIDEO){const t=l/c;e.isExpando?(l=h,c=u):t>v.c?(l=h,c=Math.min(Math.max(h/t,v.q),u)):(l=Math.min(Math.max(u*t,v.p),h),c=u)}o.media&&o.media.type===v.o.EMBED&&e.isExpando&&o.media.provider!==v.u.Twitter&&(l=h,c=u);let m=!1;if(e.isMiniCard){const e=l/c;m=Math.abs(e-v.c)>.01}let b=v.i;return o.media&&o.media.type===v.o.VIDEO&&(b=h),{source:n,obfuscated:a,width:c,height:l,maxHeight:b,needsBackgroundBlur:m}}shouldBlur(){var e=this.props;const t=e.isExpando,i=e.isOverlay,s=e.theme,o=this.isNSFW(),a=this.isSpoiler();return!(t||this.state.isRevealed||i)&&(o&&!s.subredditContext.shouldShowNSFWContent||a)}render(){var e=this.props;const t=e.className,i=e.crosspost,s=e.flairStyleTemplate,o=e.forceAspectRatio,a=e.goldPostRefactorVariant,d=e.isCommentsPage,c=e.isExpando,h=e.isListing,w=e.isNotCardView,C=e.isMediumHeight,E=e.isTitleOnly,O=e.post,S=e.postCleanupVariant,j=e.showCentered;var N=e.showFull;const T=void 0!==N&&N;var P=this.state;const W=P.canLoadContent,F=P.forcePause,B=P.shouldPause,J=P.shouldStop,$=P.viewportWidth,z=(!!S||!!a)&&Object(U.a)(O);if(!O.media&&!z)return null;const Y=F||B,X=J;var Q=this.getMediaInfo(this.props,this.state);const Z=Q.source,ie=Q.obfuscated,oe=Q.height,ae=Q.maxHeight,re=Q.width,de=Q.needsBackgroundBlur,le={showCentered:j,isListing:h,showFull:T,height:oe,width:re},ce=Object.assign({},le,{className:t,forceAspectRatio:o,maxHeight:ae,viewportWidth:$}),pe=this.shouldBlur(),he=!(!O.isSponsored||!O.source);if(ie&&pe)return n.a.createElement(x.a,Object.assign({},ce,{blurSrc:ie}),n.a.createElement(ne,{isVisible:W},n.a.createElement(f.a,Object.assign({},le,{className:this.props.imageBoxClassName,contentImageClassName:this.props.imageBoxContentImageClassName,imageClassName:this.props.imageBoxClassName,isListing:h,isNSFW:this.isNSFW(),isSpoiler:this.isSpoiler(),isVideoThumbnail:!!O.media&&O.media.type===v.o.VIDEO,onClick:this.onImageBoxClick,postId:O.id,shouldBlur:pe,source:ie,outboundUrl:he&&O.source.outboundUrl||void 0,originalSource:Z}))));if(z){const e=this.state.viewportHeight-2*se,t=this.state.viewportWidth-2*se,s=O.preview&&Object(p.a)(O.preview.url)?O.preview.url:Z;return n.a.createElement(x.a,Object.assign({},ce,{blurSrc:de?s:void 0,isExpando:!!c}),n.a.createElement(ne,{isVisible:W},n.a.createElement(f.a,Object.assign({},le,{isCrosspost:!!i,isExpando:c,isListing:h,isNSFW:this.isNSFW(),isSpoiler:this.isSpoiler(),maxHeight:c?e:void 0,maxWidth:c?t:void 0,postId:O.id,shouldBlur:pe,source:s,outboundUrl:he&&O.source.outboundUrl||void 0,originalSource:s}))))}if(!O.media)return null;switch(O.media.type){case v.o.RTJSON:const e=Object(H.a)(O,null);if(null===e)return;return T||Object(D.a)(O)?n.a.createElement(I,{canLoadContent:W,className:t,"data-click-id":"text",isCleanupVariant:!!a,isCommentsPage:d,isExpando:c,isMediumHeight:C,isRichTextTruncated:O.media.isRichtextPreview,isTitleOnly:E,postId:O.id,showFull:T},n.a.createElement(R.a,{flairStyleTemplate:s,content:O.isMeta?_(e,O.id):e,mediaMetadata:O.media.mediaMetadata,renderingObjectInfo:O,renderMediaAsLinks:h})):null;case v.o.TEXT:if(Object(k.a)(O)){const e="Text post should not include body content";return Object(m.c)(e,{extra:{info:{post:O,isListing:h,isCommentsPage:d}}}),Object(l.a)()&&console.log(`${O.id}: ${e}`),n.a.createElement(I,{postId:O.id,className:t,"data-click-id":"text",isCleanupVariant:!!a,isCommentsPage:d,showFull:T},n.a.createElement(V,{flairStyleTemplate:s,html:O.isMeta?function(e,t,i){return e.replace(`href="https://www.reddit.com/poll/${Object(A.c)(t)}`,`class="${i}" href="https://www.reddit.com/poll/${Object(A.c)(t)}`)}(O.media.content,O.id,q.a.hiddenLink):O.media.content}))}return null;case v.o.EMBED:if(this.props.isMiniCard&&O.preview&&O.preview.url)return n.a.createElement(x.a,Object.assign({},ce,{alwaysWrapMedia:!0}),n.a.createElement(ne,{isVisible:W},n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,Object.assign({},le,{className:this.props.imageBoxClassName,contentImageClassName:this.props.imageBoxContentImageClassName,imageClassName:this.props.imageBoxClassName,isExpando:c,isListing:h,isNSFW:this.isNSFW(),isCrosspost:!!i,isSpoiler:this.isSpoiler(),postId:O.id,shouldBlur:pe,source:O.preview.url,originalSource:O.preview.url})),n.a.createElement(L.a,null))));if(v.h.has(O.media.provider)){if(O.media.provider===v.u.Twitter){const e=oe||(O.media.isDeleted?ee:te);return n.a.createElement(x.a,Object.assign({},ce,{alwaysWrapMedia:!0,height:e,showFull:!0,width:K}),W&&n.a.createElement(n.a.Fragment,null,!oe&&(O.media.isDeleted?n.a.createElement("p",{className:q.a.tweetDeleted},Object(G.c)("This Tweet has been deleted.")):n.a.createElement("div",{className:Object(r.a)(Object(y.a)({isLoading:!0}),q.a.tweetPlaceholder)})),n.a.createElement(g.a,{childRef:this.storeChildRef,className:Object(r.a)(q.a.tweetEmbedBox,{[q.a.isInvisible]:!oe}),height:e,isListing:h,isResponsive:!0,onLoad:this.onIframeLoaded,showCentered:j,showFull:!0,source:Z,title:O.title,width:K})))}return n.a.createElement(x.a,Object.assign({},ce,{alwaysWrapMedia:!0,height:c?oe:v.i,width:c?re:v.i*(16/9)}),W&&n.a.createElement(g.a,{childRef:this.storeChildRef,height:c?oe:v.i,width:c?re:void 0,isListing:h,isResponsive:!0,onLoad:this.onIframeLoaded,showCentered:j,showFull:T,source:Z,title:O.title}))}return n.a.createElement(x.a,Object.assign({},ce,{alwaysWrapMedia:!0}),W&&n.a.createElement(g.a,Object.assign({},le,{isResponsive:c||O.media.provider===v.u.IFrameEmbed,title:O.title,childRef:this.storeChildRef,onLoad:this.onIframeLoaded,source:Z,fullWidth:O.media.provider===v.u.IFrameEmbed})));case v.o.GIFVIDEO:{let e=oe,t=re;return e>v.i&&(t=re/oe*(e=v.i)),n.a.createElement(x.a,Object.assign({},ce,{blurSrc:de?O.media.gifBackgroundImage:void 0}),n.a.createElement(ne,{isVisible:W},n.a.createElement(M.a,Object.assign({},le,{isNotCardView:w,height:c?void 0:e,width:c?void 0:t,postId:O.id,shouldLoad:!0,shouldPause:Y,source:Z,originalSource:O.media.content}))))}case v.o.VIDEO:{const e=O.media.posterUrl||O.preview&&O.preview.url;return this.props.isMiniCard&&e?n.a.createElement(x.a,Object.assign({},ce,{alwaysWrapMedia:!0}),n.a.createElement(ne,{isVisible:W},n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,Object.assign({},le,{className:this.props.imageBoxClassName,contentImageClassName:this.props.imageBoxContentImageClassName,imageClassName:this.props.imageBoxClassName,isExpando:c,isListing:h,isNSFW:this.isNSFW(),isCrosspost:!!i,isSpoiler:this.isSpoiler(),postId:O.id,shouldBlur:pe,source:e,originalSource:e})),n.a.createElement(L.a,null)))):n.a.createElement(x.a,Object.assign({},ce,{alwaysWrapMedia:!0}),W&&n.a.createElement(b.b,{autoPlay:"boolean"==typeof B?!B:void 0,isExpando:c,postUrl:Object(u.a)(O.permalink),shouldLoad:!0,shouldPause:Y,shouldStop:X,hlsSource:O.media.hlsUrl,mpegDashSource:O.media.dashUrl,isGif:O.media.isGif,scrubberThumbSource:O.media.scrubberThumbSource,postId:O.id,callToActionSource:O.source||void 0,callToActionText:O.callToAction,isListing:h,posterUrl:O.media.posterUrl}))}case v.o.IMAGE:const o=this.state.viewportHeight-2*se,S=this.state.viewportWidth-2*se;let N=Z;return this.props.isMiniCard&&!this.props.isMiniCardHQPreviews&&(O.thumbnail&&Object(p.a)(O.thumbnail.url)?N=O.thumbnail.url:O.preview&&Object(p.a)(O.preview.url)&&(N=O.preview.url)),n.a.createElement(x.a,Object.assign({},ce,{blurSrc:de?N:void 0,isExpando:!!c}),n.a.createElement(ne,{isVisible:W},n.a.createElement(f.a,Object.assign({},le,{className:this.props.imageBoxClassName,contentImageClassName:this.props.imageBoxContentImageClassName,imageClassName:this.props.imageBoxClassName,isExpando:c,isListing:h,isNSFW:this.isNSFW(),isCrosspost:!!i,isSpoiler:this.isSpoiler(),maxHeight:c?o:void 0,maxWidth:c?S:void 0,postId:O.id,shouldBlur:pe,source:N,outboundUrl:he&&O.source.outboundUrl||void 0,originalSource:O.media.content}))));default:return null}}})},"./src/reddit/helpers/canPreviewSelfText/index.ts":function(e,t,i){"use strict";var s=i("./src/reddit/helpers/postHasSelfText/index.ts");t.a=(e=>Object(s.a)(e)&&!e.isSpoiler&&!e.isNSFW)},"./src/reddit/helpers/postHasSelfText/index.ts":function(e,t,i){"use strict";var s=i("./src/reddit/models/Media/index.ts"),o=i("./src/reddit/models/RichTextJson/index.ts");t.a=(e=>{const t=e&&e.media;return!!t&&(t.type===s.o.TEXT&&!!t.content||t.type===s.o.RTJSON&&!Object(o.E)(t.richtextContent))})},"./src/reddit/selectors/experiments/postCleanup.ts":function(e,t,i){"use strict";i.d(t,"e",function(){return h}),i.d(t,"d",function(){return u}),i.d(t,"c",function(){return m}),i.d(t,"b",function(){return b}),i.d(t,"a",function(){return g});var s=i("./node_modules/reselect/es/index.js"),o=i("./src/lib/isUrl/index.ts"),a=i("./src/reddit/constants/experiments.ts"),n=i("./src/reddit/contexts/PageLayer/index.tsx"),r=i("./src/reddit/helpers/chooseVariant/index.ts"),d=i("./src/reddit/selectors/experiments/utils.ts"),l=i("./src/reddit/selectors/platform.ts"),c=i("./src/reddit/selectors/user.ts");const p=Object(s.a)(c.J,(e,{pageLayer:t})=>Object(n.B)(t),n.r,l.i,(e,{pageLayer:t})=>Object(n.y)(t),(e,t,i,s,o)=>!e&&(t||!!i||s&&o)),h=Object(s.a)((e,t)=>Object(r.b)(e,{experimentEligibilitySelector:e=>p(e,t),experimentName:a.A}),d.a),u=e=>e===a.nb.NewOutlineCommentLink2||e===a.nb.NewOutlineCommentLink3,m=e=>e===a.nb.NewOutlineCommentLink3||e===a.nb.NewOutlineCommentLink4||e===a.nb.NewOutlineCommentLink5,b=e=>e===a.nb.NewOutlineCommentLink4||e===a.nb.NewOutlineCommentLink5,g=e=>!(e.media||!e.source||!e.preview||!Object(o.a)(e.preview.url))}}]);
//# sourceMappingURL=CollectionCommentsPage~CommentsPage~Explore~Frontpage~GovernanceReleaseNotesModal~ModListing~ModQueu~900871b8.b18f429ba4ae525a193c.js.map